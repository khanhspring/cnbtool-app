function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw o}}}}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{qvXC:function(e,n,t){"use strict";t.r(n),t.d(n,"SalaryModule",(function(){return ki}));var i,o,a,c,r,s=t("ofXK"),l=t("tyNb"),u=t("fXoL"),b=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=u.Nb({type:i,selectors:[["app-salary"]],decls:1,vars:0,template:function(e,n){1&e&&u.Ub(0,"router-outlet")},directives:[l.g],styles:[""]}),i),p=t("3Pt+"),d=t("wd/R"),h=function e(){_classCallCheck(this,e)},f=t("AytR"),m=function e(){_classCallCheck(this,e)},z=t("oXNa"),y=function e(){_classCallCheck(this,e)},g=function e(){_classCallCheck(this,e)},v=t("PScX"),C=t("dEAy"),Y=t("jPNr"),k=t("OzZK"),I=t("FwiY"),T=t("0lU3"),Z=t("ocnv"),w=t("z4wI"),A=t("ZyQt"),S=t("QlLE"),F=t("nJia"),M=t("rMZv"),O=t("D9mS"),D=t("W9fG"),_=t("tk/3"),q=((o=function(){function e(n){_classCallCheck(this,e),this.http=n,this.API_URL=f.a.apiUrl+"/time-sheets"}return _createClass(e,[{key:"getByMonth",value:function(e){return this.http.get(this.API_URL+"/".concat(e))}},{key:"create",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e),n)}},{key:"update",value:function(e,n){return this.http.put(this.API_URL+"/".concat(e),n)}},{key:"statuses",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e,"/statuses"),n)}}]),e}()).\u0275fac=function(e){return new(e||o)(u.dc(_.c))},o.\u0275prov=u.Pb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),P=t("lGQG"),U=t("RwU8"),E=t("C2AL"),N=t("B+r4"),G=t("mrSG"),V=t("2Suw"),x=t("XNiG"),R=t("JX91"),L=t("1G5W"),B=["*"],H={small:8,middle:16,large:24},J=((r=function(){function e(n,t){_classCallCheck(this,e),this.renderer=n,this.elementRef=t}return _createClass(e,[{key:"setDirectionAndSize",value:function(e,n){var t="string"==typeof n?H[n]:n;"horizontal"===e?(this.renderer.removeStyle(this.elementRef.nativeElement,"margin-bottom"),this.renderer.setStyle(this.elementRef.nativeElement,"margin-right","".concat(t,"px"))):(this.renderer.removeStyle(this.elementRef.nativeElement,"margin-right"),this.renderer.setStyle(this.elementRef.nativeElement,"margin-bottom","".concat(t,"px")))}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||r)(u.Tb(u.E),u.Tb(u.l))},r.\u0275cmp=u.Nb({type:r,selectors:[["nz-space-item"],["","nz-space-item",""]],hostAttrs:[1,"ant-space-item"],ngContentSelectors:B,decls:1,vars:0,template:function(e,n){1&e&&(u.pc(),u.oc(0))},encapsulation:2,changeDetection:0}),r),W=((c=function(){function e(n){_classCallCheck(this,e),this.nzConfigService=n,this.nzDirection="horizontal",this.destroy$=new x.a}return _createClass(e,[{key:"updateSpaceItems",value:function(){var e=this;this.nzSpaceItemComponents&&this.nzSpaceItemComponents.forEach((function(n){n.setDirectionAndSize(e.nzDirection,e.nzSize)}))}},{key:"ngOnChanges",value:function(){this.updateSpaceItems()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"ngAfterViewInit",value:function(){var e=this;this.nzSpaceItemComponents.changes.pipe(Object(R.a)(null),Object(L.a)(this.destroy$)).subscribe((function(){e.updateSpaceItems()}))}}]),e}()).\u0275fac=function(e){return new(e||c)(u.Tb(V.a))},c.\u0275cmp=u.Nb({type:c,selectors:[["nz-space"]],contentQueries:function(e,n,t){var i;1&e&&u.Lb(t,J,!1),2&e&&u.xc(i=u.ic())&&(n.nzSpaceItemComponents=i)},hostAttrs:[1,"ant-space"],hostVars:4,hostBindings:function(e,n){2&e&&u.Jb("ant-space-horizontal","horizontal"===n.nzDirection)("ant-space-vertical","vertical"===n.nzDirection)},inputs:{nzDirection:"nzDirection",nzSize:"nzSize"},exportAs:["NzSpace"],features:[u.Ab],ngContentSelectors:B,decls:1,vars:0,template:function(e,n){1&e&&(u.pc(),u.oc(0))},encapsulation:2,changeDetection:0}),Object(G.a)([Object(V.b)("avatar","small"),Object(G.b)("design:type",Object)],c.prototype,"nzSize",void 0),c),$=((a=function e(){_classCallCheck(this,e)}).\u0275mod=u.Rb({type:a}),a.\u0275inj=u.Qb({factory:function(e){return new(e||a)},imports:[[s.c]]}),a);function j(e,n){1&e&&(u.Zb(0,"nz-tag",17),u.Ic(1,"Approved"),u.Yb()),2&e&&u.qc("nzColor","#87d068")}function X(e,n){if(1&e&&(u.Zb(0,"span"),u.Ic(1,"Have no timesheet for "),u.Zb(2,"nz-tag"),u.Ic(3),u.lc(4,"date"),u.Yb(),u.Yb()),2&e){var t=u.kc(2);u.Cb(3),u.Jc(u.nc(4,1,t.date,"MM/yyyy"))}}function Q(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",21),u.hc("click",(function(){return u.zc(t),u.kc(2).onCreate()})),u.Ic(1,"Create Now"),u.Yb()}if(2&e){var i=u.kc(2);u.qc("disabled",!i.date)}}function K(e,n){if(1&e&&(u.Zb(0,"nz-empty",18),u.Gc(1,X,5,4,"ng-template",null,19,u.Hc),u.Gc(3,Q,2,1,"ng-template",null,20,u.Hc),u.Yb()),2&e){var t=u.yc(2),i=u.yc(4);u.qc("nzNotFoundContent",t)("nzNotFoundFooter",i)}}function ee(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",34),u.hc("click",(function(){return u.zc(t),u.kc(2).onUpdateStandardWorkingHours()})),u.Ub(1,"i",35),u.Yb()}}function ne(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",7),u.hc("click",(function(){return u.zc(t),u.kc(2).approve()})),u.Ub(2,"i",36),u.Ic(3," Approve"),u.Yb(),u.Yb()}}function te(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",37),u.hc("click",(function(){return u.zc(t),u.kc(2).unapproved()})),u.Ub(2,"i",38),u.Ic(3," Unapproved"),u.Yb(),u.Yb()}}function ie(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",39),u.hc("click",(function(){return u.zc(t),u.kc(2).save()})),u.Ub(2,"i",40),u.Yb(),u.Yb()}}function oe(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"nz-upload",41),u.hc("nzChange",(function(e){return u.zc(t),u.kc(2).handleUpdateFileChange(e)})),u.Zb(2,"button",42),u.Ub(3,"i",43),u.Yb(),u.Yb(),u.Yb()}if(2&e){var i=u.kc(2);u.Cb(1),u.qc("nzAction",i.uploadAction)("nzShowUploadList",!1)}}function ae(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-form-control",15),u.Zb(1,"nz-input-number",48),u.hc("ngModelChange",(function(){return u.zc(t),u.kc(3).updateTimesheetData()})),u.Yb(),u.Yb()}if(2&e){var i=u.kc().$implicit;u.Cb(1),u.sc("formControlName","workingHours_",i.employee.id,""),u.sc("id","workingHours_",i.employee.id,"")}}function ce(e,n){if(1&e&&(u.Zb(0,"span",49),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit;u.Cb(1),u.Jc(t.workingHours)}}function re(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-form-control",15),u.Zb(1,"nz-input-number",48),u.hc("ngModelChange",(function(){return u.zc(t),u.kc(3).updateTimesheetData()})),u.Yb(),u.Yb()}if(2&e){var i=u.kc().$implicit;u.Cb(1),u.sc("formControlName","vacationHours_",i.employee.id,""),u.sc("id","vacationHours_",i.employee.id,"")}}function se(e,n){if(1&e&&(u.Zb(0,"span",49),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit;u.Cb(1),u.Jc(t.vacationHours)}}function le(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-form-control",15),u.Zb(1,"nz-input-number",48),u.hc("ngModelChange",(function(){return u.zc(t),u.kc(3).updateTimesheetData()})),u.Yb(),u.Yb()}if(2&e){var i=u.kc().$implicit;u.Cb(1),u.sc("formControlName","bizTripDays_",i.employee.id,""),u.sc("id","bizTripDays_",i.employee.id,"")}}function ue(e,n){if(1&e&&(u.Zb(0,"span",49),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit;u.Cb(1),u.Jc(t.bizTripDays)}}function be(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-form-control",15),u.Zb(1,"nz-input-number",48),u.hc("ngModelChange",(function(){return u.zc(t),u.kc(3).updateTimesheetData()})),u.Yb(),u.Yb()}if(2&e){var i=u.kc().$implicit;u.Cb(1),u.sc("formControlName","overTime100_",i.employee.id,""),u.sc("id","overTime100_",i.employee.id,"")}}function pe(e,n){if(1&e&&(u.Zb(0,"span",49),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit;u.Cb(1),u.Jc(t.overTime100)}}function de(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-form-control",15),u.Zb(1,"nz-input-number",48),u.hc("ngModelChange",(function(){return u.zc(t),u.kc(3).updateTimesheetData()})),u.Yb(),u.Yb()}if(2&e){var i=u.kc().$implicit;u.Cb(1),u.sc("formControlName","overTime120_",i.employee.id,""),u.sc("id","overTime120_",i.employee.id,"")}}function he(e,n){if(1&e&&(u.Zb(0,"span",49),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit;u.Cb(1),u.Jc(t.overTime120)}}function fe(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-form-control",15),u.Zb(1,"nz-input-number",48),u.hc("ngModelChange",(function(){return u.zc(t),u.kc(3).updateTimesheetData()})),u.Yb(),u.Yb()}if(2&e){var i=u.kc().$implicit;u.Cb(1),u.sc("formControlName","overTime150_",i.employee.id,""),u.sc("id","overTime150_",i.employee.id,"")}}function me(e,n){if(1&e&&(u.Zb(0,"span",49),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit;u.Cb(1),u.Jc(t.overTime150)}}function ze(e,n){if(1&e&&(u.Zb(0,"tr"),u.Zb(1,"td"),u.Zb(2,"a",44),u.Ic(3),u.Yb(),u.Yb(),u.Zb(4,"td"),u.Ic(5),u.Yb(),u.Zb(6,"td"),u.Ub(7,"nz-progress",45),u.lc(8,"number"),u.Yb(),u.Zb(9,"td"),u.Gc(10,ae,2,2,"nz-form-control",46),u.Gc(11,ce,2,1,"span",47),u.Yb(),u.Zb(12,"td"),u.Gc(13,re,2,2,"nz-form-control",46),u.Gc(14,se,2,1,"span",47),u.Yb(),u.Zb(15,"td"),u.Gc(16,le,2,2,"nz-form-control",46),u.Gc(17,ue,2,1,"span",47),u.Yb(),u.Zb(18,"td"),u.Gc(19,be,2,2,"nz-form-control",46),u.Gc(20,pe,2,1,"span",47),u.Yb(),u.Zb(21,"td"),u.Gc(22,de,2,2,"nz-form-control",46),u.Gc(23,he,2,1,"span",47),u.Yb(),u.Zb(24,"td"),u.Gc(25,fe,2,2,"nz-form-control",46),u.Gc(26,me,2,1,"span",47),u.Yb(),u.Yb()),2&e){var t=n.$implicit,i=u.kc(2);u.Cb(2),u.sc("routerLink","/employee/detail/",t.employee.id,""),u.Cb(1),u.Jc(t.employee.email),u.Cb(2),u.Jc(t.employee.fullName),u.Cb(2),u.qc("nzPercent",u.nc(8,16,100*t.workingHours/i.standardWorkingHours,"1.0-0")),u.Cb(3),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(2),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(2),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(2),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(2),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(2),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved)}}function ye(e,n){if(1&e&&(u.Zb(0,"div",22),u.Zb(1,"div",23),u.Zb(2,"div",24),u.Zb(3,"h1",25),u.Ic(4),u.Zb(5,"span"),u.Ic(6,"hours"),u.Yb(),u.Gc(7,ee,2,0,"button",26),u.Yb(),u.Yb(),u.Zb(8,"div",27),u.Zb(9,"nz-space"),u.Gc(10,ne,4,0,"nz-space-item",28),u.Gc(11,te,4,0,"nz-space-item",28),u.Gc(12,ie,3,0,"nz-space-item",28),u.Gc(13,oe,4,2,"nz-space-item",28),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"div",29),u.Zb(15,"form",13),u.Zb(16,"nz-table",30,31),u.Zb(18,"thead"),u.Zb(19,"tr"),u.Zb(20,"th"),u.Ic(21,"Email"),u.Yb(),u.Zb(22,"th"),u.Ic(23,"Name"),u.Yb(),u.Zb(24,"th"),u.Ic(25,"Visualization"),u.Yb(),u.Zb(26,"th",32),u.Ic(27,"Working hours"),u.Yb(),u.Zb(28,"th",32),u.Ic(29,"Paid vacation hours"),u.Yb(),u.Zb(30,"th",32),u.Ic(31,"Biz trip (days)"),u.Yb(),u.Zb(32,"th",32),u.Ic(33,"OT 100% (hours)"),u.Yb(),u.Zb(34,"th",32),u.Ic(35,"OT 120% (hours)"),u.Yb(),u.Zb(36,"th",32),u.Ic(37,"OT 150% (hours)"),u.Yb(),u.Yb(),u.Yb(),u.Zb(38,"tbody"),u.Gc(39,ze,27,19,"tr",33),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&e){var t=u.yc(17),i=u.kc();u.Cb(4),u.Kc("",i.standardWorkingHours," "),u.Cb(3),u.qc("ngIf",!i.isApproved),u.Cb(3),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(1),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",!i.isApproved),u.Cb(2),u.qc("formGroup",i.timesheetForm),u.Cb(1),u.qc("nzData",i.listOfData)("nzShowPagination",!1)("nzFrontPagination",!1),u.Cb(23),u.qc("ngForOf",t.data)}}var ge,ve=((ge=function(){function e(n,t,i,o,a,c){_classCallCheck(this,e),this.fb=n,this.route=t,this.message=i,this.modal=o,this.timeSheetService=a,this.authService=c,this.date=new Date,this.isModalVisible=!1,this.listOfData=[],this.isApproved=!1,this.isCreated=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm=this.fb.group({standardWorkingHours:[null,[p.o.required]]}),this.timesheetForm=this.fb.group({}),this.loadTimeSheet()}},{key:"onMonthChange",value:function(e){this.date=e,this.loadTimeSheet()}},{key:"onThisMonth",value:function(){this.date=new Date,this.loadTimeSheet()}},{key:"onPrevMonth",value:function(){this.date=d(this.date).add(-1,"month").toDate(),this.loadTimeSheet()}},{key:"onNextMonth",value:function(){this.date=d(this.date).add(1,"month").toDate(),this.loadTimeSheet()}},{key:"onCreate",value:function(){this.isModalVisible=!0}},{key:"onUpdateStandardWorkingHours",value:function(){this.createForm.get("standardWorkingHours").setValue(this.standardWorkingHours),this.isModalVisible=!0}},{key:"handleCreateFormOk",value:function(){var e=this;for(var n in this.createForm.controls)this.createForm.controls[n].markAsDirty(),this.createForm.controls[n].updateValueAndValidity();if(!this.createForm.invalid&&(this.isModalVisible=!1,this.standardWorkingHours=+this.createForm.get("standardWorkingHours").value,!this.isCreated)){var t=d(this.date).format("YYYY-MM"),i=new h;i.standardWorkingHours=this.standardWorkingHours,this.timeSheetService.create(t,i).subscribe((function(n){e.initTimesheetData(n),e.updateUploadData(),e.isCreated=!0}),(function(n){e.message.error("Couldn't create time sheet!")}))}}},{key:"handleCreateFormCancel",value:function(){this.isModalVisible=!1,this.createForm.reset()}},{key:"initTimesheetData",value:function(e){var n=this;this.listOfData=e.items,this.timesheetForm=this.fb.group({standardWorkingHours:[e.standardWorkingHours,[p.o.required]]}),e.items.forEach((function(e){n.timesheetForm.addControl("workingHours_"+e.employee.id,new p.d(e.workingHours,p.o.required)),n.timesheetForm.addControl("vacationHours_"+e.employee.id,new p.d(e.vacationHours,p.o.required)),n.timesheetForm.addControl("bizTripDays_"+e.employee.id,new p.d(e.bizTripDays,p.o.required)),n.timesheetForm.addControl("overTime100_"+e.employee.id,new p.d(e.overTime100,p.o.required)),n.timesheetForm.addControl("overTime120_"+e.employee.id,new p.d(e.overTime120,p.o.required)),n.timesheetForm.addControl("overTime150_"+e.employee.id,new p.d(e.overTime150,p.o.required))}))}},{key:"handleUpdateFileChange",value:function(e){"done"===e.file.status&&this.loadTimeSheet()}},{key:"save",value:function(){var e=this,n=new y,t=d(this.date).format("YYYY-MM");n.items=this.toRequest(this.listOfData),this.timeSheetService.update(t,n).subscribe((function(n){e.message.info("Save successfully!"),e.loadTimeSheet()}),(function(n){e.message.error("Couldn't update time sheet!")}))}},{key:"approve",value:function(){var e=this;this.modal.confirm({nzTitle:"Do you Want to approve this timesheet?",nzContent:"Once you approved, you can still edit it later",nzOnOk:function(){var n=new g;n.status="APPROVED";var t=d(e.date).format("YYYY-MM");e.timeSheetService.statuses(t,n).subscribe((function(n){e.updateTimesheetData(),e.isApproved=!0,e.message.info("Approve successfully!")}),(function(n){e.message.error("Approve unsuccessfully!")}))}})}},{key:"unapproved",value:function(){var e=this,n=d(this.date).format("YYYY-MM"),t=new g;t.status="UNAPPROVED",this.timeSheetService.statuses(n,t).subscribe((function(n){e.updateTimesheetData(),e.isApproved=!1,e.message.info("Unapproved successfully!")}),(function(n){e.message.error("Unapproved unsuccessfully!")}))}},{key:"updateTimesheetData",value:function(){var e,n=_createForOfIteratorHelper(this.listOfData);try{for(n.s();!(e=n.n()).done;){var t=e.value;t.workingHours=this.timesheetForm.get("workingHours_"+t.employee.id).value,t.vacationHours=this.timesheetForm.get("vacationHours_"+t.employee.id).value,t.bizTripDays=this.timesheetForm.get("bizTripDays_"+t.employee.id).value,t.overTime100=this.timesheetForm.get("overTime100_"+t.employee.id).value,t.overTime120=this.timesheetForm.get("overTime120_"+t.employee.id).value,t.overTime150=this.timesheetForm.get("overTime150_"+t.employee.id).value}}catch(i){n.e(i)}finally{n.f()}}},{key:"loadTimeSheet",value:function(){var e=this,n=d(this.date).format("YYYY-MM");this.timeSheetService.getByMonth(n).subscribe((function(n){e.isCreated=!0,e.initTimesheetData(n),e.standardWorkingHours=n.standardWorkingHours,e.isApproved=n.status&&"APPROVED"===n.status,e.updateUploadData()}),(function(n){e.isCreated=!1,e.standardWorkingHours=void 0,e.isApproved=!1,e.listOfData=[]}))}},{key:"updateUploadData",value:function(){var e=d(this.date).format("YYYY-MM");this.uploadAction=f.a.apiUrl+"/time-sheets/".concat(e,"/importing")}},{key:"toRequest",value:function(e){return e.map((function(e){var n=new m;return z.a.map(e,n),n}))}}]),e}()).\u0275fac=function(e){return new(e||ge)(u.Tb(p.c),u.Tb(l.c),u.Tb(v.b),u.Tb(C.c),u.Tb(q),u.Tb(P.a))},ge.\u0275cmp=u.Nb({type:ge,selectors:[["app-timekeeping"]],decls:28,vars:16,consts:[[1,"wrap"],[1,"page-header"],["class","ml-1",3,"nzColor",4,"ngIf"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-icon","","nzType","arrow-right","nzTheme","outline"],["nzPlaceHolder","Select month",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","aim","nzTheme","outline"],[1,"page-content"],[3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],["class","form-wrap",4,"ngIf"],[3,"nzVisible","nzTitle","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-form","",3,"formGroup"],["nzRequired","","nzFor","standardWorkingHours",3,"nzSm","nzXs"],["nzErrorTip","The input is required!"],["formControlName","standardWorkingHours","id","standardWorkingHours","nzPlaceHolder","Standard working hours",2,"width","100%"],[1,"ml-1",3,"nzColor"],[3,"nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["nz-button","","nzType","primary",3,"disabled","click"],[1,"form-wrap"],["nz-row","",1,"form-header"],["nz-col","","nzSpan","6"],["nz-tooltip","","nzTooltipTitle","Standard working hours"],["nz-button","","nzType","link","nzShape","circle","nzSize","small","class","ml-1",3,"click",4,"ngIf"],["nz-col","","nzSpan","18",1,"text-right"],[4,"ngIf"],[1,"form-content"],[1,"data-table",3,"nzData","nzShowPagination","nzFrontPagination"],["basicTable",""],["width","100px",1,"text-center"],[4,"ngFor","ngForOf"],["nz-button","","nzType","link","nzShape","circle","nzSize","small",1,"ml-1",3,"click"],["nz-icon","","nzType","edit"],["nz-icon","","nzType","check"],["nz-button","","nzType","default","nzDanger","","nzShape","round",3,"click"],["nz-icon","","nzType","stop"],["nz-button","","nzType","default","nzShape","circle","nz-tooltip","","nzTooltipTitle","Save",3,"click"],["nz-icon","","nzType","save"],[3,"nzAction","nzShowUploadList","nzChange"],["nz-button","","nzType","dashed","nzShape","circle","nz-tooltip","","nzTooltipTitle","Import"],["nz-icon","","nzType","upload"],[3,"routerLink"],["nzSize","small",3,"nzPercent"],["nzErrorTip","The input is required!",4,"ngIf"],["class","read-only-lbl",4,"ngIf"],["nzSize","small",2,"width","100%",3,"formControlName","id","ngModelChange"],[1,"read-only-lbl"]],template:function(e,n){1&e&&(u.Zb(0,"div",0),u.Zb(1,"nz-page-header",1),u.Zb(2,"nz-page-header-title"),u.Ic(3,"Timesheet"),u.Yb(),u.Zb(4,"nz-page-header-subtitle"),u.Ic(5),u.lc(6,"date"),u.Gc(7,j,2,1,"nz-tag",2),u.Yb(),u.Zb(8,"nz-page-header-extra"),u.Zb(9,"button",3),u.hc("click",(function(){return n.onPrevMonth()})),u.Ub(10,"i",4),u.Yb(),u.Zb(11,"button",3),u.hc("click",(function(){return n.onNextMonth()})),u.Ub(12,"i",5),u.Yb(),u.Zb(13,"nz-month-picker",6),u.hc("ngModelChange",(function(e){return n.date=e}))("ngModelChange",(function(e){return n.onMonthChange(e)})),u.Yb(),u.Zb(14,"button",7),u.hc("click",(function(){return n.onThisMonth()})),u.Ub(15,"i",8),u.Ic(16,"This month "),u.Yb(),u.Yb(),u.Yb(),u.Zb(17,"div",9),u.Gc(18,K,5,2,"nz-empty",10),u.Gc(19,ye,40,11,"div",11),u.Yb(),u.Yb(),u.Zb(20,"nz-modal",12),u.hc("nzVisibleChange",(function(e){return n.isModalVisible=e}))("nzOnCancel",(function(){return n.handleCreateFormCancel()}))("nzOnOk",(function(){return n.handleCreateFormOk()})),u.lc(21,"date"),u.Zb(22,"form",13),u.Zb(23,"nz-form-item"),u.Zb(24,"nz-form-label",14),u.Ic(25,"Standard working hours"),u.Yb(),u.Zb(26,"nz-form-control",15),u.Ub(27,"nz-input-number",16),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&e&&(u.Cb(5),u.Kc("",u.nc(6,10,n.date,"MM/yyyy")," "),u.Cb(2),u.qc("ngIf",n.isApproved),u.Cb(6),u.qc("ngModel",n.date),u.Cb(5),u.qc("ngIf",!n.isCreated),u.Cb(1),u.qc("ngIf",n.isCreated),u.Cb(1),u.sc("nzTitle","Create new timesheet for ",u.nc(21,13,n.date,"MM/yyyy"),""),u.qc("nzVisible",n.isModalVisible),u.Cb(2),u.qc("formGroup",n.createForm),u.Cb(2),u.qc("nzSm",9)("nzXs",24))},directives:[Y.a,Y.e,Y.d,s.m,Y.b,k.a,U.a,E.a,I.b,T.a,T.c,p.k,p.m,C.a,p.p,p.l,Z.b,p.g,N.c,Z.c,N.a,Z.d,Z.a,w.a,p.f,A.a,S.b,F.d,W,M.c,M.g,M.h,M.b,M.f,M.e,s.l,J,O.a,l.e,D.a],pipes:[s.e,s.f],styles:["nz-empty[_ngcontent-%COMP%]{margin-top:50px}.standard-working-hours[_ngcontent-%COMP%]{overflow:hidden;float:left;margin-bottom:10px;padding:20px;border:1px solid #f1f1f1}.form-content[_ngcontent-%COMP%]{width:100%;float:left}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;float:left}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px!important;font-weight:400;color:#777}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{display:inline-block}.read-only-lbl[_ngcontent-%COMP%]{line-height:32px;padding-right:8px;text-align:right;display:block}"]}),ge),Ce=function(e){return e.UTILITY_BILLS="UTILITY_BILLS",e.PERSONAL_TRAVEL_FEES="PERSONAL_TRAVEL_FEES",e.ADVANCES="ADVANCES",e.ARREARS="ARREARS",e.OTHER="OTHER",e}({}),Ye=t("GR68"),ke=t("/KA4"),Ie=t("pdGh");function Te(e,n){if(1&e&&(u.Xb(0),u.Ub(1,"i",6),u.Wb()),2&e){var t=u.kc(2);u.Cb(1),u.qc("nzType",t.nzIconType||t.inferredIconType)("nzTheme",t.iconTheme)}}function Ze(e,n){if(1&e&&(u.Xb(0),u.Ic(1),u.Wb()),2&e){var t=u.kc(3);u.Cb(1),u.Jc(t.nzMessage)}}function we(e,n){if(1&e&&(u.Zb(0,"span",7),u.Gc(1,Ze,2,1,"ng-container",8),u.Yb()),2&e){var t=u.kc(2);u.Cb(1),u.qc("nzStringTemplateOutlet",t.nzMessage)}}function Ae(e,n){if(1&e&&(u.Xb(0),u.Ic(1),u.Wb()),2&e){var t=u.kc(3);u.Cb(1),u.Jc(t.nzDescription)}}function Se(e,n){if(1&e&&(u.Zb(0,"span",9),u.Gc(1,Ae,2,1,"ng-container",8),u.Yb()),2&e){var t=u.kc(2);u.Cb(1),u.qc("nzStringTemplateOutlet",t.nzDescription)}}function Fe(e,n){1&e&&u.Ub(0,"i",13)}function Me(e,n){if(1&e&&(u.Xb(0),u.Zb(1,"span",14),u.Ic(2),u.Yb(),u.Wb()),2&e){var t=u.kc(4);u.Cb(2),u.Jc(t.nzCloseText)}}function Oe(e,n){if(1&e&&(u.Xb(0),u.Gc(1,Me,3,1,"ng-container",8),u.Wb()),2&e){var t=u.kc(3);u.Cb(1),u.qc("nzStringTemplateOutlet",t.nzCloseText)}}function De(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",10),u.hc("click",(function(){return u.zc(t),u.kc(2).closeAlert()})),u.Gc(1,Fe,1,0,"ng-template",null,11,u.Hc),u.Gc(3,Oe,2,1,"ng-container",12),u.Yb()}if(2&e){var i=u.yc(2),o=u.kc(2);u.Cb(3),u.qc("ngIf",o.nzCloseText)("ngIfElse",i)}}function _e(e,n){if(1&e){var t=u.ac();u.Zb(0,"div",1),u.hc("@slideAlertMotion.done",(function(){return u.zc(t),u.kc().onFadeAnimationDone()})),u.Gc(1,Te,2,2,"ng-container",2),u.Gc(2,we,2,1,"span",3),u.Gc(3,Se,2,1,"span",4),u.Gc(4,De,4,2,"button",5),u.Yb()}if(2&e){var i=u.kc();u.Jb("ant-alert-success","success"===i.nzType)("ant-alert-info","info"===i.nzType)("ant-alert-warning","warning"===i.nzType)("ant-alert-error","error"===i.nzType)("ant-alert-no-icon",!i.nzShowIcon)("ant-alert-banner",i.nzBanner)("ant-alert-closable",i.nzCloseable)("ant-alert-with-description",!!i.nzDescription),u.qc("@slideAlertMotion",void 0),u.Cb(1),u.qc("ngIf",i.nzShowIcon),u.Cb(1),u.qc("ngIf",i.nzMessage),u.Cb(1),u.qc("ngIf",i.nzDescription),u.Cb(1),u.qc("ngIf",i.nzCloseable||i.nzCloseText)}}var qe,Pe,Ue=((Pe=function(){function e(n,t){var i=this;_classCallCheck(this,e),this.nzConfigService=n,this.cdr=t,this.nzCloseText=null,this.nzIconType=null,this.nzMessage=null,this.nzDescription=null,this.nzType="info",this.nzBanner=!1,this.nzOnClose=new u.n,this.closed=!1,this.iconTheme="fill",this.inferredIconType="info-circle",this.isTypeSet=!1,this.isShowIconSet=!1,this.destroy$=new x.a,this.nzConfigService.getConfigChangeEventForComponent("alert").pipe(Object(L.a)(this.destroy$)).subscribe((function(){i.cdr.markForCheck()}))}return _createClass(e,[{key:"closeAlert",value:function(){this.closed=!0}},{key:"onFadeAnimationDone",value:function(){this.closed&&this.nzOnClose.emit(!0)}},{key:"ngOnChanges",value:function(e){var n=e.nzShowIcon,t=e.nzDescription,i=e.nzType,o=e.nzBanner;if(n&&(this.isShowIconSet=!0),i)switch(this.isTypeSet=!0,this.nzType){case"error":this.inferredIconType="close-circle";break;case"success":this.inferredIconType="check-circle";break;case"info":this.inferredIconType="info-circle";break;case"warning":this.inferredIconType="exclamation-circle"}t&&(this.iconTheme=this.nzDescription?"outline":"fill"),o&&(this.isTypeSet||(this.nzType="warning"),this.isShowIconSet||(this.nzShowIcon=!0))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}()).\u0275fac=function(e){return new(e||Pe)(u.Tb(V.a),u.Tb(u.h))},Pe.\u0275cmp=u.Nb({type:Pe,selectors:[["nz-alert"]],inputs:{nzCloseText:"nzCloseText",nzIconType:"nzIconType",nzMessage:"nzMessage",nzDescription:"nzDescription",nzType:"nzType",nzBanner:"nzBanner",nzShowIcon:"nzShowIcon",nzCloseable:"nzCloseable"},outputs:{nzOnClose:"nzOnClose"},exportAs:["nzAlert"],features:[u.Ab],decls:1,vars:1,consts:[["class","ant-alert",3,"ant-alert-success","ant-alert-info","ant-alert-warning","ant-alert-error","ant-alert-no-icon","ant-alert-banner","ant-alert-closable","ant-alert-with-description",4,"ngIf"],[1,"ant-alert"],[4,"ngIf"],["class","ant-alert-message",4,"ngIf"],["class","ant-alert-description",4,"ngIf"],["type","button","tabindex","0","class","ant-alert-close-icon",3,"click",4,"ngIf"],["nz-icon","",1,"ant-alert-icon",3,"nzType","nzTheme"],[1,"ant-alert-message"],[4,"nzStringTemplateOutlet"],[1,"ant-alert-description"],["type","button","tabindex","0",1,"ant-alert-close-icon",3,"click"],["closeDefaultTemplate",""],[4,"ngIf","ngIfElse"],["nz-icon","","nzType","close"],[1,"ant-alert-close-text"]],template:function(e,n){1&e&&u.Gc(0,_e,5,21,"div",0),2&e&&u.qc("ngIf",!n.closed)},directives:[s.m,I.b,Ie.b],encapsulation:2,data:{animation:[Ye.e]},changeDetection:0}),Object(G.a)([Object(V.b)("alert",!1),Object(ke.a)(),Object(G.b)("design:type",Boolean)],Pe.prototype,"nzCloseable",void 0),Object(G.a)([Object(V.b)("alert",!1),Object(ke.a)(),Object(G.b)("design:type",Boolean)],Pe.prototype,"nzShowIcon",void 0),Object(G.a)([Object(ke.a)(),Object(G.b)("design:type",Object)],Pe.prototype,"nzBanner",void 0),Pe),Ee=((qe=function e(){_classCallCheck(this,e)}).\u0275mod=u.Rb({type:qe}),qe.\u0275inj=u.Qb({factory:function(e){return new(e||qe)},imports:[[s.c,I.c,Ie.a]]}),qe),Ne=t("nLfN"),Ge=["template"];function Ve(e,n){if(1&e&&(u.Xb(0),u.Ic(1),u.Wb()),2&e){var t=u.kc(2);u.Cb(1),u.Jc(t.nzDot)}}function xe(e,n){if(1&e&&(u.Zb(0,"li",1),u.Ub(1,"div",2),u.Zb(2,"div",3),u.Gc(3,Ve,2,1,"ng-container",4),u.Yb(),u.Zb(4,"div",5),u.oc(5),u.Yb(),u.Yb()),2&e){var t=u.kc();u.Jb("ant-timeline-item-right","right"===t.position)("ant-timeline-item-left","left"===t.position)("ant-timeline-item-last",t.isLast),u.Cb(2),u.Fc("border-color",t.borderColor),u.Jb("ant-timeline-item-head-red","red"===t.nzColor)("ant-timeline-item-head-blue","blue"===t.nzColor)("ant-timeline-item-head-green","green"===t.nzColor)("ant-timeline-item-head-gray","gray"===t.nzColor)("ant-timeline-item-head-custom",!!t.nzDot),u.Cb(1),u.qc("nzStringTemplateOutlet",t.nzDot)}}var Re=["*"];function Le(e,n){if(1&e&&u.Vb(0,4),2&e){u.kc();var t=u.yc(5);u.qc("ngTemplateOutlet",t)}}function Be(e,n){}function He(e,n){if(1&e&&(u.Xb(0),u.Gc(1,Be,0,0,"ng-template",4),u.Wb()),2&e){var t=n.$implicit;u.Cb(1),u.qc("ngTemplateOutlet",t.template)}}function Je(e,n){if(1&e&&u.Vb(0,4),2&e){u.kc();var t=u.yc(5);u.qc("ngTemplateOutlet",t)}}function We(e,n){1&e&&u.Ub(0,"i",12)}function $e(e,n){if(1&e&&(u.Xb(0),u.Ic(1),u.Gc(2,We,1,0,"i",11),u.Wb()),2&e){var t=u.kc(3);u.Cb(1),u.Kc(" ",t.nzPendingDot,""),u.Cb(1),u.qc("ngIf",!t.nzPendingDot)}}function je(e,n){if(1&e&&(u.Xb(0),u.Ic(1),u.Wb()),2&e){var t=u.kc(3);u.Cb(1),u.Kc(" ",t.isPendingBoolean?"":t.nzPending," ")}}function Xe(e,n){if(1&e&&(u.Zb(0,"li",6),u.Ub(1,"div",7),u.Zb(2,"div",8),u.Gc(3,$e,3,2,"ng-container",9),u.Yb(),u.Zb(4,"div",10),u.Gc(5,je,2,1,"ng-container",9),u.Yb(),u.Yb()),2&e){var t=u.kc(2);u.Cb(3),u.qc("nzStringTemplateOutlet",t.nzPendingDot),u.Cb(2),u.qc("nzStringTemplateOutlet",t.nzPending)}}function Qe(e,n){if(1&e&&u.Gc(0,Xe,6,2,"li",5),2&e){var t=u.kc();u.qc("ngIf",t.nzPending)}}var Ke,en,nn=["red","blue","green","grey","gray"],tn=((en=function(){function e(n){_classCallCheck(this,e),this.cdr=n,this.nzColor="blue",this.isLast=!1,this.borderColor=null}return _createClass(e,[{key:"ngOnChanges",value:function(e){e.nzColor&&this.updateCustomColor()}},{key:"detectChanges",value:function(){this.cdr.detectChanges()}},{key:"updateCustomColor",value:function(){var e;this.borderColor=(e=this.nzColor,-1!==nn.findIndex((function(n){return n===e}))?null:this.nzColor)}}]),e}()).\u0275fac=function(e){return new(e||en)(u.Tb(u.h))},en.\u0275cmp=u.Nb({type:en,selectors:[["nz-timeline-item"],["","nz-timeline-item",""]],viewQuery:function(e,n){var t;1&e&&u.Mc(Ge,!0),2&e&&u.xc(t=u.ic())&&(n.template=t.first)},inputs:{nzColor:"nzColor",nzDot:"nzDot"},exportAs:["nzTimelineItem"],features:[u.Ab],ngContentSelectors:Re,decls:2,vars:0,consts:[["template",""],[1,"ant-timeline-item"],[1,"ant-timeline-item-tail"],[1,"ant-timeline-item-head"],[4,"nzStringTemplateOutlet"],[1,"ant-timeline-item-content"]],template:function(e,n){1&e&&(u.pc(),u.Gc(0,xe,6,19,"ng-template",null,0,u.Hc))},directives:[Ie.b],encapsulation:2,changeDetection:0}),en),on=((Ke=function(){function e(n){_classCallCheck(this,e),this.cdr=n,this.nzReverse=!1,this.isPendingBoolean=!1,this.timelineItems=[],this.destroy$=new x.a}return _createClass(e,[{key:"ngOnChanges",value:function(e){var n=e.nzMode,t=e.nzReverse,i=e.nzPending;(an(n)||an(t))&&this.updateChildren(),i&&(this.isPendingBoolean=!0===i.currentValue)}},{key:"ngAfterContentInit",value:function(){var e=this;this.updateChildren(),this.listOfItems.changes.pipe(Object(L.a)(this.destroy$)).subscribe((function(){e.updateChildren()}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"updateChildren",value:function(){var e=this;if(this.listOfItems&&this.listOfItems.length){var n=this.listOfItems.length;this.listOfItems.forEach((function(t,i){t.isLast=e.nzReverse?0===i:i===n-1,t.position="left"!==e.nzMode&&e.nzMode?"right"===e.nzMode?"right":"alternate"===e.nzMode&&i%2==0?"left":"right":void 0,t.detectChanges()})),this.timelineItems=this.nzReverse?this.listOfItems.toArray().reverse():this.listOfItems.toArray()}this.cdr.markForCheck()}}]),e}()).\u0275fac=function(e){return new(e||Ke)(u.Tb(u.h))},Ke.\u0275cmp=u.Nb({type:Ke,selectors:[["nz-timeline"]],contentQueries:function(e,n,t){var i;1&e&&u.Lb(t,tn,!1),2&e&&u.xc(i=u.ic())&&(n.listOfItems=i)},inputs:{nzReverse:"nzReverse",nzMode:"nzMode",nzPending:"nzPending",nzPendingDot:"nzPendingDot"},exportAs:["nzTimeline"],features:[u.Ab],ngContentSelectors:Re,decls:7,vars:11,consts:[[1,"ant-timeline"],[3,"ngTemplateOutlet",4,"ngIf"],[4,"ngFor","ngForOf"],["pendingTemplate",""],[3,"ngTemplateOutlet"],["class","ant-timeline-item ant-timeline-item-pending",4,"ngIf"],[1,"ant-timeline-item","ant-timeline-item-pending"],[1,"ant-timeline-item-tail"],[1,"ant-timeline-item-head","ant-timeline-item-head-custom","ant-timeline-item-head-blue"],[4,"nzStringTemplateOutlet"],[1,"ant-timeline-item-content"],["nz-icon","","nzType","loading",4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(e,n){1&e&&(u.pc(),u.Zb(0,"ul",0),u.Gc(1,Le,1,1,"ng-container",1),u.Gc(2,He,2,1,"ng-container",2),u.Gc(3,Je,1,1,"ng-container",1),u.Yb(),u.Gc(4,Qe,1,1,"ng-template",null,3,u.Hc),u.oc(6)),2&e&&(u.Jb("ant-timeline-right","right"===n.nzMode)("ant-timeline-alternate","alternate"===n.nzMode)("ant-timeline-pending",!!n.nzPending)("ant-timeline-reverse",n.nzReverse),u.Cb(1),u.qc("ngIf",n.nzReverse),u.Cb(1),u.qc("ngForOf",n.timelineItems),u.Cb(1),u.qc("ngIf",!n.nzReverse))},directives:[s.m,s.l,s.r,Ie.b,I.b],encapsulation:2,changeDetection:0}),Ke);function an(e){return!(!e||e.previousValue===e.currentValue&&!e.isFirstChange())}var cn,rn,sn,ln,un,bn=((cn=function e(){_classCallCheck(this,e)}).\u0275mod=u.Rb({type:cn}),cn.\u0275inj=u.Qb({factory:function(e){return new(e||cn)},imports:[[s.c,Ne.b,I.c,Ie.a]]}),cn),pn=t("PTRe"),dn=t("pjuo"),hn=((un=function(){function e(n){_classCallCheck(this,e),this.http=n,this.API_URL=f.a.apiUrl+"/payrolls"}return _createClass(e,[{key:"getByMonth",value:function(e){return this.http.get(this.API_URL+"/".concat(e))}},{key:"create",value:function(e){return this.http.post(this.API_URL+"/".concat(e),null)}},{key:"approve",value:function(e){return this.http.post(this.API_URL+"/".concat(e,"/approved"),null)}},{key:"unapproved",value:function(e){return this.http.post(this.API_URL+"/".concat(e,"/unapproved"),null)}},{key:"refresh",value:function(e){return this.http.post(this.API_URL+"/".concat(e,"/refresh"),null)}},{key:"getItemStatus",value:function(e){return this.http.get(this.API_URL+"/".concat(e,"/items-status"))}},{key:"requestDownload",value:function(e){return this.http.post(this.API_URL+"/".concat(e,"/download"),null)}}]),e}()).\u0275fac=function(e){return new(e||un)(u.dc(_.c))},un.\u0275prov=u.Pb({token:un,factory:un.\u0275fac,providedIn:"root"}),un),fn=((ln=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(n,t,i){if(!n)return n;var o=[];if(i&&"and"===i){o=_toConsumableArray(n);for(var a=function(n){var i=t[n];o=o.filter((function(n){return!i.value||(e.getVal(i.key,n)+"").includes(i.value.trim())}))},c=0;c<t.length;c++)a(c)}else console.log(t.length),o=n.filter((function(n){for(var i=0;i<t.length;i++){var o=t[i];if(!o.value||(e.getVal(o.key,n)+"").includes(o.value.trim()))return!0}return!1}));return o}}],[{key:"getVal",value:function(e,n){var t,i=n,o=_createForOfIteratorHelper(e.split("->"));try{for(o.s();!(t=o.n()).done;){var a=t.value;if(void 0===i[a.trim()]||null===i[a.trim()])return"";i=i[a.trim()]}}catch(c){o.e(c)}finally{o.f()}return i}}]),e}()).\u0275fac=function(e){return new(e||ln)},ln.\u0275pipe=u.Sb({name:"search",type:ln,pure:!0}),ln),mn=((sn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return e?e.substring(0,e.indexOf("@")):""}}]),e}()).\u0275fac=function(e){return new(e||sn)},sn.\u0275pipe=u.Sb({name:"emailName",type:sn,pure:!0}),sn),zn=((rn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){if(!e)return"Unknown";switch(e){case"FEES":return"Fees";case"ALLOWANCES":return"Allowances";case"TIMESHEET":return"Timesheet";case"BONUS":return"Bonus";default:return"Unknown"}}}]),e}()).\u0275fac=function(e){return new(e||rn)},rn.\u0275pipe=u.Sb({name:"payrollChecklistCodeToText",type:rn,pure:!0}),rn);function yn(e,n){1&e&&(u.Zb(0,"nz-tag",17),u.Ic(1,"Approved"),u.Yb()),2&e&&u.qc("nzColor","#87d068")}function gn(e,n){if(1&e&&(u.Zb(0,"span"),u.Ic(1,"Have no payroll for "),u.Zb(2,"nz-tag"),u.Ic(3),u.lc(4,"date"),u.Yb(),u.Yb()),2&e){var t=u.kc(2);u.Cb(3),u.Jc(u.nc(4,1,t.date,"MM/yyyy"))}}function vn(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",21),u.hc("click",(function(){return u.zc(t),u.kc(2).onCreate()})),u.Ic(1,"Create Now"),u.Yb()}if(2&e){var i=u.kc(2);u.qc("disabled",!i.date)("nzLoading",i.isCreating)}}function Cn(e,n){if(1&e&&(u.Zb(0,"nz-empty",18),u.Gc(1,gn,5,4,"ng-template",null,19,u.Hc),u.Gc(3,vn,2,2,"ng-template",null,20,u.Hc),u.Yb()),2&e){var t=u.yc(2),i=u.yc(4);u.qc("nzNotFoundContent",t)("nzNotFoundFooter",i)}}function Yn(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",7),u.hc("click",(function(){return u.zc(t),u.kc(2).approve()})),u.Ub(2,"i",49),u.Ic(3," Approve"),u.Yb(),u.Yb()}}function kn(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",50),u.hc("click",(function(){return u.zc(t),u.kc(2).unapproved()})),u.Ub(2,"i",51),u.Ic(3," Unapproved"),u.Yb(),u.Yb()}}var In=function(e){return{fontSize:e}};function Tn(e,n){if(1&e&&(u.Zb(0,"tr"),u.Zb(1,"td",52),u.Zb(2,"span",53),u.Ic(3),u.lc(4,"emailName"),u.Yb(),u.Yb(),u.Zb(5,"td",52),u.Ic(6),u.Yb(),u.Zb(7,"td"),u.Ic(8),u.Yb(),u.Zb(9,"td"),u.Ic(10),u.Yb(),u.Zb(11,"td"),u.Ic(12),u.lc(13,"number"),u.Yb(),u.Zb(14,"td"),u.Ic(15),u.lc(16,"number"),u.Yb(),u.Zb(17,"td"),u.Ic(18),u.Yb(),u.Zb(19,"td"),u.Ic(20),u.Yb(),u.Zb(21,"td"),u.Ic(22),u.lc(23,"number"),u.Yb(),u.Zb(24,"td"),u.Ic(25),u.lc(26,"number"),u.Yb(),u.Zb(27,"td"),u.Ic(28),u.lc(29,"number"),u.Yb(),u.Zb(30,"td"),u.Ic(31),u.lc(32,"number"),u.Yb(),u.Zb(33,"td"),u.Ic(34),u.lc(35,"number"),u.Yb(),u.Zb(36,"td"),u.Ic(37),u.lc(38,"number"),u.Yb(),u.Zb(39,"td"),u.Ic(40),u.lc(41,"number"),u.Yb(),u.Zb(42,"td"),u.Ic(43),u.lc(44,"number"),u.Yb(),u.Zb(45,"td"),u.Ic(46),u.lc(47,"number"),u.Yb(),u.Zb(48,"td"),u.Ic(49),u.lc(50,"number"),u.Yb(),u.Zb(51,"td"),u.Ic(52),u.lc(53,"number"),u.Yb(),u.Zb(54,"td"),u.Ic(55),u.Yb(),u.Zb(56,"td"),u.Ic(57),u.Yb(),u.Zb(58,"td"),u.Ic(59),u.lc(60,"number"),u.Yb(),u.Zb(61,"td"),u.Ic(62),u.lc(63,"number"),u.Yb(),u.Zb(64,"td"),u.Ic(65),u.lc(66,"number"),u.Yb(),u.Zb(67,"td"),u.Ic(68),u.lc(69,"number"),u.Yb(),u.Zb(70,"td"),u.Ic(71),u.lc(72,"number"),u.Yb(),u.Zb(73,"td"),u.Ic(74),u.lc(75,"number"),u.Yb(),u.Zb(76,"td"),u.Ic(77),u.Yb(),u.Zb(78,"td"),u.Ic(79),u.Yb(),u.Zb(80,"td"),u.Ic(81),u.lc(82,"number"),u.Yb(),u.Zb(83,"td",48),u.Zb(84,"nz-space"),u.Zb(85,"nz-space-item"),u.Zb(86,"button",54),u.Ub(87,"i",55),u.Yb(),u.Yb(),u.Zb(88,"nz-space-item"),u.Zb(89,"button",56),u.Ub(90,"i",57),u.Yb(),u.Yb(),u.Zb(91,"nz-space-item"),u.Zb(92,"button",58),u.Ub(93,"i",59),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&e){var t=n.$implicit,i=u.kc(2);u.Ec(u.uc(75,In,i.setting.fontSize+"px")),u.Cb(2),u.qc("nzTooltipTitle",t.employee.email),u.Cb(1),u.Jc(u.mc(4,33,t.employee.email)),u.Cb(3),u.Jc(t.employee.fullName),u.Cb(2),u.Jc(t.employee.position),u.Cb(2),u.Jc(t.employee.company),u.Cb(2),u.Jc(u.mc(13,35,t.socialInsurance.contributionFixed)),u.Cb(3),u.Jc(u.mc(16,37,t.currentSalary.amount)),u.Cb(3),u.Jc(t.timeSheet.standardWorkingHours),u.Cb(2),u.Jc(t.timeSheet.actualWorkingHours),u.Cb(2),u.Jc(u.mc(23,39,t.summary.calculatedSalary)),u.Cb(3),u.Jc(u.mc(26,41,t.summary.bizTripDaysToMoney)),u.Cb(3),u.Jc(u.mc(29,43,t.allowances.totalAmount)),u.Cb(3),u.Jc(u.mc(32,45,t.summary.ot100ToMoney)),u.Cb(3),u.Jc(u.mc(35,47,t.summary.ot120ToMoney)),u.Cb(3),u.Jc(u.mc(38,49,t.summary.ot150ToMoney)),u.Cb(3),u.Jc(u.mc(41,51,t.allowances.groups.COMPENSATION)),u.Cb(3),u.Jc(u.mc(44,53,t.bonuses.totalAmount)),u.Cb(3),u.Jc(u.mc(47,55,t.summary.total)),u.Cb(3),u.Jc(u.mc(50,57,t.socialInsurance.contribution)),u.Cb(3),u.Jc(u.mc(53,59,t.summary.incomeBeforeTaxes)),u.Cb(3),u.Jc(t.socialInsurance.dependents),u.Cb(2),u.Jc(t.socialInsurance.familyAllowance),u.Cb(2),u.Jc(u.mc(60,61,t.taxes.taxableIncome)),u.Cb(3),u.Jc(u.mc(63,63,t.taxes.personalIncomeTax)),u.Cb(3),u.Jc(u.mc(66,65,t.fees.groups.UTILITY_BILLS)),u.Cb(3),u.Jc(u.mc(69,67,t.fees.groups.ADVANCES_AND_OTHER)),u.Cb(3),u.Jc(u.mc(72,69,t.summary.realField)),u.Cb(3),u.Jc(u.mc(75,71,t.summary.actualIncome)),u.Cb(3),u.Jc(t.bankInfo.bankCode),u.Cb(2),u.Jc(t.bankInfo.accountCode),u.Cb(2),u.Jc(u.mc(82,73,t.bankInfo.payRounded))}}var Zn=function(e){return{x:e,y:"500px"}},wn=function(e){return{key:"employee -> email",value:e}},An=function(e){return{key:"employee -> fullName",value:e}},Sn=function(e,n){return[e,n]},Fn=function(e){return{fontSize:e,textAlign:"center"}};function Mn(e,n){if(1&e){var t=u.ac();u.Zb(0,"div",22),u.Zb(1,"div",23),u.Zb(2,"div",24),u.Zb(3,"nz-space"),u.Zb(4,"nz-space-item"),u.Zb(5,"button",25),u.hc("click",(function(){return u.zc(t),u.kc().zoomOut()})),u.Ub(6,"i",26),u.Yb(),u.Yb(),u.Zb(7,"nz-space-item"),u.Zb(8,"button",25),u.hc("click",(function(){return u.zc(t),u.kc().zoomIn()})),u.Ub(9,"i",27),u.Yb(),u.Yb(),u.Zb(10,"nz-space-item"),u.Zb(11,"form",28),u.hc("ngSubmit",(function(){return u.zc(t),u.kc().searchFormSubmit()})),u.Zb(12,"nz-form-item",29),u.Zb(13,"nz-form-control"),u.Ub(14,"input",30),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"div",31),u.Zb(16,"nz-space"),u.Gc(17,Yn,4,0,"nz-space-item",32),u.Gc(18,kn,4,0,"nz-space-item",32),u.Yb(),u.Yb(),u.Yb(),u.Zb(19,"div",33),u.Zb(20,"nz-table",34,35),u.lc(22,"search"),u.Zb(23,"thead"),u.Zb(24,"tr"),u.Ub(25,"th",36),u.Ub(26,"th",36),u.Zb(27,"th",37),u.Ic(28,"Basic information"),u.Yb(),u.Zb(29,"th",38),u.Ic(30,"Income increased"),u.Yb(),u.Ub(31,"th",39),u.Zb(32,"th",40),u.Ic(33,"Insurances and taxes"),u.Yb(),u.Zb(34,"th",41),u.Ic(35,"Fees"),u.Yb(),u.Ub(36,"th",42),u.Zb(37,"th",43),u.Ic(38,"Bank information"),u.Yb(),u.Ub(39,"th",44),u.Yb(),u.Zb(40,"tr"),u.Zb(41,"th",45),u.Ic(42,"Email"),u.Yb(),u.Zb(43,"th",45),u.Ic(44,"Full name"),u.Yb(),u.Zb(45,"th"),u.Ic(46,"Position"),u.Yb(),u.Zb(47,"th"),u.Ic(48,"Biz"),u.Yb(),u.Zb(49,"th"),u.Zb(50,"span",46),u.Ic(51,"SI limit"),u.Yb(),u.Yb(),u.Zb(52,"th"),u.Ic(53,"Salary"),u.Yb(),u.Zb(54,"th"),u.Ic(55,"Standard working hours"),u.Yb(),u.Zb(56,"th"),u.Ic(57,"Actual working hours"),u.Yb(),u.Zb(58,"th"),u.Ic(59,"Salary calculation"),u.Yb(),u.Zb(60,"th"),u.Ic(61,"Biz fee"),u.Yb(),u.Zb(62,"th"),u.Ic(63,"Allowances"),u.Yb(),u.Zb(64,"th"),u.Ic(65,"OT 100%"),u.Yb(),u.Zb(66,"th"),u.Ic(67,"OT 120%"),u.Yb(),u.Zb(68,"th"),u.Ic(69,"OT 150%"),u.Yb(),u.Zb(70,"th"),u.Ic(71,"Offset amount"),u.Yb(),u.Zb(72,"th"),u.Ic(73,"Bonus"),u.Yb(),u.Zb(74,"th"),u.Ic(75,"Total"),u.Yb(),u.Zb(76,"th"),u.Zb(77,"span",47),u.Ic(78,"SI contribution"),u.Yb(),u.Yb(),u.Zb(79,"th"),u.Ic(80,"Income before tax"),u.Yb(),u.Zb(81,"th"),u.Ic(82,"Dependent"),u.Yb(),u.Zb(83,"th"),u.Ic(84,"Family allowance"),u.Yb(),u.Zb(85,"th"),u.Ic(86,"Taxable income"),u.Yb(),u.Zb(87,"th"),u.Ic(88,"Personal income tax"),u.Yb(),u.Zb(89,"th"),u.Ic(90,"Utility bill"),u.Yb(),u.Zb(91,"th"),u.Ic(92,"Advance payment / other deductions"),u.Yb(),u.Zb(93,"th"),u.Ic(94,"Actual income"),u.Yb(),u.Zb(95,"th"),u.Ic(96,"Real field"),u.Yb(),u.Zb(97,"th"),u.Ic(98,"Bank name"),u.Yb(),u.Zb(99,"th"),u.Ic(100,"Bank account"),u.Yb(),u.Zb(101,"th"),u.Ic(102,"Bank transfer amount"),u.Yb(),u.Zb(103,"th",48),u.Ic(104,"Action"),u.Yb(),u.Yb(),u.Yb(),u.Zb(105,"tbody"),u.Gc(106,Tn,94,77,"ng-template",15),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&e){var i=u.yc(21),o=u.kc();u.Cb(5),u.qc("nzType",o.setting.fontSize<o.setting.fontSizeDefault?"primary":"dashed")("disabled",o.setting.fontSize<=8),u.Cb(3),u.qc("nzType",o.setting.fontSize>o.setting.fontSizeDefault?"primary":"dashed")("disabled",o.setting.fontSize>=o.setting.fontSizeDefault+2),u.Cb(3),u.qc("formGroup",o.searchForm),u.Cb(6),u.qc("ngIf",!o.isApproved),u.Cb(1),u.qc("ngIf",o.isApproved),u.Cb(2),u.qc("nzScroll",u.uc(26,Zn,31*o.setting.avgColumnsWidth+"px"))("nzData",u.nc(22,23,o.listOfData,u.vc(32,Sn,u.uc(28,wn,o.searchQuery),u.uc(30,An,o.searchQuery))))("nzFrontPagination",!1),u.Cb(5),u.qc("width",o.setting.avgColumnsWidth),u.Cb(1),u.qc("width",o.setting.avgColumnsWidth),u.Cb(1),u.qc("width",7*o.setting.avgColumnsWidth),u.Cb(2),u.qc("width",7*o.setting.avgColumnsWidth),u.Cb(2),u.qc("width",o.setting.avgColumnsWidth),u.Cb(1),u.qc("width",6*o.setting.avgColumnsWidth),u.Cb(2),u.qc("width",2*o.setting.avgColumnsWidth),u.Cb(2),u.qc("width",2*o.setting.avgColumnsWidth),u.Cb(1),u.qc("width",3*o.setting.avgColumnsWidth),u.Cb(2),u.qc("width",o.setting.avgColumnsWidth),u.Cb(1),u.Ec(u.uc(35,Fn,o.setting.fontSize-1+"px")),u.Cb(66),u.qc("ngForOf",i.data)}}function On(e,n){if(1&e&&(u.Zb(0,"nz-timeline-item"),u.Zb(1,"b"),u.Ic(2),u.lc(3,"payrollChecklistCodeToText"),u.Yb(),u.Ic(4," approved at "),u.Zb(5,"nz-tag",61),u.Ic(6),u.lc(7,"date"),u.Yb(),u.Yb()),2&e){var t=u.kc().$implicit;u.Cb(2),u.Jc(u.mc(3,2,t.code)),u.Cb(4),u.Jc(u.nc(7,4,t.approvedAt,"dd/MM/yyyy HH:mm"))}}function Dn(e,n){if(1&e&&(u.Zb(0,"nz-timeline-item",62),u.Zb(1,"b"),u.Ic(2),u.lc(3,"payrollChecklistCodeToText"),u.Yb(),u.Ic(4," is pending... "),u.Yb()),2&e){var t=u.kc().$implicit;u.kc();var i=u.yc(26);u.qc("nzDot",i),u.Cb(2),u.Kc("",u.mc(3,2,t.code)," ")}}function _n(e,n){if(1&e&&(u.Gc(0,On,8,7,"nz-timeline-item",32),u.Gc(1,Dn,5,4,"nz-timeline-item",60)),2&e){var t=n.$implicit;u.qc("ngIf",t.approvedAt),u.Cb(1),u.qc("ngIf",!t.approvedAt)}}function qn(e,n){1&e&&u.Ub(0,"i",63)}new Date(1588266e6);var Pn,Un,En,Nn,Gn,Vn=((Un=function(){function e(n,t,i,o,a,c){_classCallCheck(this,e),this.fb=n,this.route=t,this.message=i,this.modal=o,this.employeeService=a,this.payrollService=c,this.date=new Date,this.isApproved=!1,this.listOfData=[],this.isModalVisible=!1,this.isCreated=!1,this.isCreating=!1,this.isApproving=!1,this.employees=[],this.checkList=[],this.isValid=!1,this.setting={fontSize:12,fontSizeDefault:12,columns:{email:{width:90},fullName:{width:150},action:{width:100}},avgColumnsWidth:110}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getEmployee(),this.loadPayroll(),this.searchForm=this.fb.group({searchQuery:[null,[]]})}},{key:"onMonthChange",value:function(e){console.log("onChange: ",e)}},{key:"onThisMonth",value:function(){this.date=new Date}},{key:"onCreate",value:function(){var e=this;this.isCreating=!0;var n=d(this.date).format("YYYY-MM");this.payrollService.getItemStatus(n).subscribe((function(t){if(e.isValid=t.valid,e.checkList=t.items,!e.isValid)return e.isCreating=!1,void(e.isModalVisible=!0);e.payrollService.create(n).subscribe((function(n){e.isCreated=!0,e.isCreating=!1,e.listOfData=n.items}),(function(n){e.isCreating=!1}))}),(function(n){return e.isCreating=!1}))}},{key:"approve",value:function(){var e=this;this.modal.confirm({nzTitle:"Do you Want to approve this timesheet?",nzContent:"Once you approved, you can still edit it later",nzOnOk:function(){return new Promise((function(e,n){setTimeout(Math.random()>.5?e:n,1e3)})).then((function(){e.isApproved=!0,e.message.info("Approve successfully!")})).catch((function(){console.log("Oops errors!"),e.isApproved=!0}))}})}},{key:"unapproved",value:function(){this.isApproved=!1}},{key:"handleModalCancel",value:function(){this.isModalVisible=!1}},{key:"handleModalOk",value:function(){this.isValid=!0,this.isModalVisible=!1}},{key:"zoomOut",value:function(){this.setting.fontSize--}},{key:"zoomIn",value:function(){this.setting.fontSize++}},{key:"searchFormSubmit",value:function(){this.searchQuery=this.searchForm.get("searchQuery").value}},{key:"loadPayroll",value:function(){var e=this,n=d(this.date).format("YYYY-MM");this.payrollService.getByMonth(n).subscribe((function(n){n.available?(e.isCreated=!0,e.isApproved=n.status&&"APPROVED"===n.status,e.listOfData=n.items):e.refresh()}),(function(n){e.isCreated=!1,e.isApproved=!1,e.listOfData=[]}))}},{key:"refresh",value:function(){var e=this,n=d(this.date).format("YYYY-MM");this.payrollService.refresh(n).subscribe((function(n){e.isCreated=!0,e.isApproved=n.status&&"APPROVED"===n.status,e.listOfData=n.items}),(function(n){e.isCreated=!1,e.isApproved=!1,e.listOfData=[]}))}},{key:"getEmployee",value:function(){var e=this;this.employeeService.getAll().subscribe((function(n){e.employees=n}))}}]),e}()).\u0275fac=function(e){return new(e||Un)(u.Tb(p.c),u.Tb(l.c),u.Tb(v.b),u.Tb(C.c),u.Tb(dn.a),u.Tb(hn))},Un.\u0275cmp=u.Nb({type:Un,selectors:[["app-payroll"]],decls:27,vars:10,consts:[[1,"wrap"],[1,"page-header"],["class","ml-1",3,"nzColor",4,"ngIf"],["nz-button","","nzType","primary","nzShape","circle"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-icon","","nzType","arrow-right","nzTheme","outline"],["nzPlaceHolder","Select month",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","aim","nzTheme","outline"],[1,"page-content"],[3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],["class","form-wrap",4,"ngIf"],["nzTitle","Check list to create a payroll for this month",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],["nzShowIcon","","nzType","warning","nzMessage","Please approve parts with pending status below:",2,"width","100%"],[1,"timeline"],["ngFor","",3,"ngForOf"],["pendingDot",""],[1,"ml-1",3,"nzColor"],[3,"nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[1,"form-wrap"],["nz-row","",1,"page-action"],["nz-col","","nzSpan","8"],["nz-button","","nzShape","circle",3,"nzType","disabled","click"],["nz-icon","","nzType","zoom-out","nzTheme","outline"],["nz-icon","","nzType","zoom-in","nzTheme","outline"],["nz-form","",3,"formGroup","ngSubmit"],[1,"m-0"],["placeholder","Enter email, full name to search","nz-input","","id","searchQuery","formControlName","searchQuery",2,"width","300px"],["nz-col","","nzSpan","16",1,"text-right"],[4,"ngIf"],[1,"data-table-wrap"],[1,"data-table",3,"nzScroll","nzData","nzFrontPagination"],["fixedTable",""],["colspan","1","nzLeft","",2,"background","#A2ADB8",3,"width"],["colspan","7",2,"background","#72D0FF",3,"width"],["colspan","7",2,"background","#8AC94D",3,"width"],["colspan","1",2,"background","#72D0FF",3,"width"],["colspan","6",2,"background","#FFA071",3,"width"],["colspan","2",2,"background","#FF884D",3,"width"],["colspan","2",2,"background","#72D0FF",3,"width"],["colspan","3",2,"background","#FFD170",3,"width"],["colspan","1","nzRight","",2,"background","#A2ADB8",3,"width"],["nzLeft","","rowspan","2"],["nz-tooltip","","nzTooltipTitle","Social insurance contribution limit"],["nz-tooltip","","nzTooltipTitle","Social insurance contribution in real"],["nzRight",""],["nz-icon","","nzType","check"],["nz-button","","nzType","default","nzDanger","","nzShape","round",3,"click"],["nz-icon","","nzType","stop"],["nzLeft",""],["nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nz-tooltip","","nzTooltipTitle","Preview"],["nz-icon","","nzType","eye"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nz-tooltip","","nzTooltipTitle","Send email"],["nz-icon","","nzType","send"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nz-tooltip","","nzTooltipTitle","Send for me"],["nz-icon","","nzType","mail"],[3,"nzDot",4,"ngIf"],["nzColor","blue"],[3,"nzDot"],["nz-icon","","nzType","loading","nzTheme","outline"]],template:function(e,n){1&e&&(u.Zb(0,"div",0),u.Zb(1,"nz-page-header",1),u.Zb(2,"nz-page-header-title"),u.Ic(3,"Payroll"),u.Yb(),u.Zb(4,"nz-page-header-subtitle"),u.Ic(5),u.lc(6,"date"),u.Gc(7,yn,2,1,"nz-tag",2),u.Yb(),u.Zb(8,"nz-page-header-extra"),u.Zb(9,"button",3),u.Ub(10,"i",4),u.Yb(),u.Zb(11,"button",3),u.Ub(12,"i",5),u.Yb(),u.Zb(13,"nz-month-picker",6),u.hc("ngModelChange",(function(e){return n.date=e}))("ngModelChange",(function(e){return n.onMonthChange(e)})),u.Yb(),u.Zb(14,"button",7),u.hc("click",(function(){return n.onThisMonth()})),u.Ub(15,"i",8),u.Ic(16,"This month "),u.Yb(),u.Yb(),u.Yb(),u.Zb(17,"div",9),u.Gc(18,Cn,5,2,"nz-empty",10),u.Gc(19,Mn,107,37,"div",11),u.Yb(),u.Yb(),u.Zb(20,"nz-modal",12),u.hc("nzVisibleChange",(function(e){return n.isModalVisible=e}))("nzOnCancel",(function(){return n.handleModalCancel()}))("nzOnOk",(function(){return n.handleModalOk()})),u.Ub(21,"nz-alert",13),u.Zb(22,"div",14),u.Zb(23,"nz-timeline"),u.Gc(24,_n,2,2,"ng-template",15),u.Yb(),u.Yb(),u.Gc(25,qn,1,0,"ng-template",null,16,u.Hc),u.Yb()),2&e&&(u.Cb(5),u.Kc("",u.nc(6,7,n.date,"MM/yyyy")," "),u.Cb(2),u.qc("ngIf",n.isApproved),u.Cb(6),u.qc("ngModel",n.date),u.Cb(5),u.qc("ngIf",!n.isCreated),u.Cb(1),u.qc("ngIf",n.isCreated),u.Cb(1),u.qc("nzVisible",n.isModalVisible),u.Cb(4),u.qc("ngForOf",n.checkList))},directives:[Y.a,Y.e,Y.d,s.m,Y.b,k.a,U.a,E.a,I.b,T.a,T.c,p.k,p.m,C.a,Ue,on,s.l,A.a,S.b,N.c,N.a,W,J,p.p,p.l,Z.b,p.g,Z.c,Z.a,pn.b,p.b,p.f,M.c,M.g,M.h,M.b,M.f,M.a,F.d,M.e,tn],pipes:[s.e,fn,mn,s.f,zn],styles:[".page-action[_ngcontent-%COMP%]{padding-bottom:25px}nz-empty[_ngcontent-%COMP%]{margin-top:50px}.timeline[_ngcontent-%COMP%]{padding-top:30px;padding-left:20px}.data-table-wrap[_ngcontent-%COMP%]{width:100%;overflow:hidden}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;padding:5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}"]}),Un),xn=((Pn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){if(!e)return"";switch(e){case Ce.UTILITY_BILLS:return"Utility bills";case Ce.PERSONAL_TRAVEL_FEES:return"Personal travel fees";case Ce.ADVANCES:return"Advances";case Ce.ARREARS:return"Arrears";case Ce.OTHER:return"Other"}}}]),e}()).\u0275fac=function(e){return new(e||Pn)},Pn.\u0275pipe=u.Sb({name:"feeTypeName",type:Pn,pure:!0}),Pn),Rn=function e(){_classCallCheck(this,e)},Ln=function e(){_classCallCheck(this,e)},Bn=function e(){_classCallCheck(this,e)},Hn=function e(){_classCallCheck(this,e)},Jn=t("zAKX"),Wn=t("5vDB"),$n=t("+oEP"),jn=((Gn=function(){function e(n){_classCallCheck(this,e),this.http=n,this.API_URL=f.a.apiUrl+"/fees"}return _createClass(e,[{key:"getByMonth",value:function(e){return this.http.get(this.API_URL+"/".concat(e))}},{key:"create",value:function(e){return this.http.post(this.API_URL,e)}},{key:"updateByEmployee",value:function(e,n,t){return this.http.put(this.API_URL+"/".concat(e,"/").concat(n),t)}},{key:"deleteByEmployee",value:function(e,n,t){return this.http.delete(this.API_URL+"/".concat(e,"/").concat(n))}},{key:"statuses",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e,"/statuses"),n)}},{key:"addByEmployee",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e),n)}}]),e}()).\u0275fac=function(e){return new(e||Gn)(u.dc(_.c))},Gn.\u0275prov=u.Pb({token:Gn,factory:Gn.\u0275fac,providedIn:"root"}),Gn),Xn=((Nn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,n){return e?e.map((function(e){return+e[n]})).reduce((function(e,n){return e+n})):0}}]),e}()).\u0275fac=function(e){return new(e||Nn)},Nn.\u0275pipe=u.Sb({name:"sumByField",type:Nn,pure:!0}),Nn),Qn=((En=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,n){return e?e.length<=+n?e:e.substr(0,+n)+"...":e}}]),e}()).\u0275fac=function(e){return new(e||En)},En.\u0275pipe=u.Sb({name:"subStr",type:En,pure:!0}),En);function Kn(e,n){1&e&&(u.Zb(0,"nz-tag",30),u.Ic(1,"Approved"),u.Yb()),2&e&&u.qc("nzColor","#87d068")}function et(e,n){if(1&e&&(u.Zb(0,"span"),u.Ic(1,"Have no fees for "),u.Zb(2,"nz-tag"),u.Ic(3),u.lc(4,"date"),u.Yb(),u.Yb()),2&e){var t=u.kc(2);u.Cb(3),u.Jc(u.nc(4,1,t.date,"MM/yyyy"))}}function nt(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space"),u.Zb(1,"nz-space-item"),u.Zb(2,"button",34),u.hc("click",(function(){return u.zc(t),u.kc(2).add()})),u.Ic(3,"Create Now"),u.Yb(),u.Yb(),u.Zb(4,"nz-space-item"),u.Zb(5,"button",35),u.hc("click",(function(){return u.zc(t),u.kc(2).onEmptyApprove()})),u.Ic(6,"Approve with empty fee"),u.Yb(),u.Yb(),u.Yb()}if(2&e){var i=u.kc(2);u.Cb(2),u.qc("disabled",!i.date),u.Cb(3),u.qc("disabled",!i.date)("nzLoading",i.isApproving)}}function tt(e,n){if(1&e&&(u.Zb(0,"nz-empty",31),u.Gc(1,et,5,4,"ng-template",null,32,u.Hc),u.Gc(3,nt,7,3,"ng-template",null,33,u.Hc),u.Yb()),2&e){var t=u.yc(2),i=u.yc(4);u.qc("nzNotFoundContent",t)("nzNotFoundFooter",i)}}function it(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",7),u.hc("click",(function(){return u.zc(t),u.kc(2).approve()})),u.Ub(2,"i",41),u.Ic(3," Approve"),u.Yb(),u.Yb()}}function ot(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",42),u.hc("click",(function(){return u.zc(t),u.kc(2).unapproved()})),u.Ub(2,"i",43),u.Ic(3," Unapproved"),u.Yb(),u.Yb()}}function at(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",22),u.hc("click",(function(){return u.zc(t),u.kc(2).add()})),u.Ub(2,"i",23),u.Yb(),u.Yb()}}function ct(e,n){1&e&&(u.Zb(0,"th"),u.Ic(1,"##"),u.Yb())}function rt(e,n){if(1&e){var t=u.ac();u.Zb(0,"td"),u.Zb(1,"button",47),u.hc("click",(function(){u.zc(t);var e=u.kc().$implicit;return u.kc(2).edit(e)})),u.Ub(2,"i",48),u.Yb(),u.Zb(3,"button",49),u.Ub(4,"i",50),u.Yb(),u.Yb()}}function st(e,n){if(1&e&&(u.Zb(0,"div",51),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit,i=u.kc(2);u.Cb(1),u.Jc(i.getDescription(t.items))}}function lt(e,n){if(1&e&&(u.Zb(0,"tr"),u.Zb(1,"td"),u.Zb(2,"a",44),u.Ic(3),u.Yb(),u.Yb(),u.Zb(4,"td"),u.Ic(5),u.Yb(),u.Zb(6,"td"),u.Ic(7),u.lc(8,"number"),u.lc(9,"sumByField"),u.Yb(),u.Zb(10,"td"),u.Ic(11),u.lc(12,"subStr"),u.Ub(13,"i",45),u.Yb(),u.Gc(14,rt,5,0,"td",38),u.Yb(),u.Gc(15,st,2,1,"ng-template",null,46,u.Hc)),2&e){var t=n.$implicit,i=u.yc(16),o=u.kc(2);u.Cb(2),u.sc("routerLink","/employee/detail/",t.employee.id,""),u.Cb(1),u.Jc(t.employee.email),u.Cb(2),u.Jc(t.employee.fullName),u.Cb(2),u.Jc(u.mc(8,7,u.nc(9,9,t.items,"amount"))),u.Cb(4),u.Kc(" ",u.nc(12,12,o.getDescription(t.items),"30")," "),u.Cb(2),u.qc("nzPopoverContent",i),u.Cb(1),u.qc("ngIf",!o.isApproved)}}function ut(e,n){if(1&e&&(u.Zb(0,"div",36),u.Zb(1,"div",18),u.Zb(2,"div",37),u.Zb(3,"nz-space"),u.Gc(4,it,4,0,"nz-space-item",38),u.Gc(5,ot,4,0,"nz-space-item",38),u.Gc(6,at,3,0,"nz-space-item",38),u.Yb(),u.Yb(),u.Yb(),u.Zb(7,"nz-table",39,40),u.Zb(9,"thead"),u.Zb(10,"tr"),u.Zb(11,"th"),u.Ic(12,"Email"),u.Yb(),u.Zb(13,"th"),u.Ic(14,"Name"),u.Yb(),u.Zb(15,"th"),u.Ic(16,"Total fee amount"),u.Yb(),u.Zb(17,"th"),u.Ic(18,"Detail"),u.Yb(),u.Gc(19,ct,2,0,"th",38),u.Yb(),u.Yb(),u.Zb(20,"tbody"),u.Gc(21,lt,17,15,"ng-template",29),u.Yb(),u.Yb(),u.Yb()),2&e){var t=u.yc(8),i=u.kc();u.Cb(4),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(1),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("nzData",i.listOfData)("nzShowPagination",!1),u.Cb(12),u.qc("ngIf",!i.isApproved),u.Cb(2),u.qc("ngForOf",t.data)}}function bt(e,n){if(1&e&&u.Ub(0,"nz-option",52),2&e){var t=n.$implicit;u.qc("nzLabel",t.fullName)("nzValue",t.id)}}function pt(e,n){if(1&e&&(u.Ub(0,"nz-option",52),u.lc(1,"feeTypeName")),2&e){var t=n.$implicit;u.qc("nzLabel",u.mc(1,2,t))("nzValue",t)}}function dt(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",57),u.hc("click",(function(){u.zc(t);var e=u.kc().$implicit;return u.kc().removeFee(e)})),u.Ub(1,"i",50),u.Yb()}}function ht(e,n){if(1&e){var t=u.ac();u.Zb(0,"tr"),u.Zb(1,"td"),u.Zb(2,"nz-form-item"),u.Zb(3,"nz-form-control",15),u.Zb(4,"nz-select",53),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateFeesData()})),u.Gc(5,pt,2,4,"nz-option",17),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(6,"td"),u.Zb(7,"nz-form-item"),u.Zb(8,"nz-form-control",15),u.Zb(9,"nz-input-number",54),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateFeesData()})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(10,"td"),u.Zb(11,"nz-form-item"),u.Zb(12,"nz-form-control",15),u.Zb(13,"textarea",55),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateFeesData()})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"td"),u.Gc(15,dt,2,0,"button",56),u.Yb(),u.Yb()}if(2&e){var i=n.$implicit,o=u.kc();u.Cb(4),u.qc("formControlName","type_"+i.id),u.Cb(1),u.qc("ngForOf",o.feeTypes),u.Cb(4),u.qc("formControlName","amount_"+i.id),u.Cb(4),u.qc("formControlName","description_"+i.id),u.Cb(2),u.qc("ngIf",o.newFees.length>1)}}var ft,mt,zt=((ft=function(){function e(n,t,i,o,a,c){_classCallCheck(this,e),this.fb=n,this.route=t,this.message=i,this.modal=o,this.employeeService=a,this.feeService=c,this.date=new Date,this.isApproved=!1,this.listOfData=[],this.isModalVisible=!1,this.isCreated=!1,this.isApproving=!1,this.currentFeeId=0,this.feeTypes=Object.keys(Ce),this.allEmployees=[],this.employees=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm=this.fb.group({employeeId:[null,[p.o.required]]}),this.newFees=[],this.getEmployee(),this.loadFee()}},{key:"onMonthChange",value:function(e){this.date=e,this.loadFee()}},{key:"onThisMonth",value:function(){this.date=new Date,this.loadFee()}},{key:"onPrevMonth",value:function(){this.date=d(this.date).add(-1,"month").toDate(),this.loadFee()}},{key:"onNextMonth",value:function(){this.date=d(this.date).add(1,"month").toDate(),this.loadFee()}},{key:"onEmptyApprove",value:function(){var e=this,n=new Hn;n.month=d(this.date).format("YYYY-MM")+"-01",n.isApprove=!0,this.feeService.create(n).subscribe((function(n){e.isCreated=!0,e.isApproved=!0,e.message.info("Approve successfully!")}),(function(n){e.message.error("Unapproved successfully!")}))}},{key:"handleCreateFormOk",value:function(){var e=this;for(var n in this.createForm.controls)this.createForm.controls[n].markAsDirty(),this.createForm.controls[n].updateValueAndValidity();if(!this.createForm.invalid){var t=d(this.date).format("YYYY-MM");if("ADD"===this.actionType){var i=new Ln;i.employee=new Bn,i.employee.id=this.createForm.get("employeeId").value,i.items=this.newFees,i.createIfNotExist=!0,this.feeService.addByEmployee(t,i).subscribe((function(n){e.listOfData=n.items,e.isCreated=!0,e.message.info("Add successfully!")}),(function(n){e.message.error("Add unsuccessfully!")}))}"EDIT"===this.actionType&&this.feeService.updateByEmployee(t,this.currentEmployeeId,this.newFees).subscribe((function(n){e.listOfData=n.items,e.message.info("Update successfully!")}),(function(n){e.message.error("Update unsuccessfully!")})),this.isModalVisible=!1}}},{key:"handleCreateFormCancel",value:function(){this.isModalVisible=!1,this.resetCreateForm()}},{key:"approve",value:function(){var e=this;this.modal.confirm({nzTitle:"Do you Want to approve this fees?",nzContent:"Once you approved, you can still edit it later",nzOnOk:function(){var n=new g;n.status="APPROVED";var t=d(e.date).format("YYYY-MM");e.feeService.statuses(t,n).subscribe((function(n){e.isApproved=!0,e.message.info("Approve successfully!")}),(function(n){e.message.error("Approve unsuccessfully!")}))}})}},{key:"unapproved",value:function(){var e=this,n=new g;n.status="UNAPPROVED";var t=d(this.date).format("YYYY-MM");this.feeService.statuses(t,n).subscribe((function(n){e.isApproved=!1,e.message.info("Unapproved successfully!")}),(function(n){e.message.error("Unapproved unsuccessfully!")}))}},{key:"add",value:function(){var e=this;this.employees=this.allEmployees.filter((function(n){return!e.listOfData.some((function(e){return e.employee.id===n.id}))})),this.resetCreateForm(),this.addFee(),this.isModalVisible=!0,this.actionType="ADD"}},{key:"edit",value:function(e){this.employees=this.allEmployees.filter((function(n){return n.id===e.employee.id})),this.initCreateForm(e),this.isModalVisible=!0,this.actionType="EDIT"}},{key:"addFee",value:function(){var e=new Rn;e.id=this.currentFeeId+"";var n=this.newFees;n.push(e),this.newFees=_toConsumableArray(n),this.createForm.addControl("type_"+this.currentFeeId,new p.d(null,p.o.required)),this.createForm.addControl("amount_"+this.currentFeeId,new p.d(0,p.o.required)),this.createForm.addControl("description_"+this.currentFeeId,new p.d(null,p.o.required)),this.currentFeeId++}},{key:"removeFee",value:function(e){this.createForm.removeControl("type_"+e.id),this.createForm.removeControl("amount_"+e.id),this.createForm.removeControl("description_"+e.id),this.newFees=this.newFees.filter((function(n){return n.id!==e.id}))}},{key:"updateFeesData",value:function(){var e,n=_createForOfIteratorHelper(this.newFees);try{for(n.s();!(e=n.n()).done;){var t=e.value;t.description=this.createForm.get("description_"+t.id).value,t.amount=this.createForm.get("amount_"+t.id).value,t.type=this.createForm.get("type_"+t.id).value}}catch(i){n.e(i)}finally{n.f()}}},{key:"resetCreateForm",value:function(){this.createForm=this.fb.group({employeeId:[null,[p.o.required]]}),this.newFees=[],this.currentFeeId=0}},{key:"initCreateForm",value:function(e){this.createForm=this.fb.group({});var n=e.items.map((function(e){return z.a.map(e,new Ln)}));this.newFees=_toConsumableArray(n),this.currentEmployeeId=e.employee.id,this.createForm.addControl("employeeId",new p.d(e.employee.id,p.o.required));for(var t=0;t<n.length;t++){var i=n[t];this.createForm.addControl("type_"+i.id,new p.d(i.type,p.o.required)),this.createForm.addControl("amount_"+i.id,new p.d(i.amount,p.o.required)),this.createForm.addControl("description_"+i.id,new p.d(i.description))}var o=n.map((function(e){return e.id}));this.currentFeeId=Math.max.apply(Math,o)+1}},{key:"getDescription",value:function(e){var n="";return e.forEach((function(e){n.length&&(n+="\n"),n+=(new xn).transform(e.type),e.description&&(n+=" ("+e.description+")"),n+=": "+e.amount})),n}},{key:"loadFee",value:function(){var e=this,n=d(this.date).format("YYYY-MM");this.feeService.getByMonth(n).subscribe((function(n){e.isCreated=!0,e.isApproved=n.status&&"APPROVED"===n.status,e.listOfData=n.items}),(function(n){e.isCreated=!1,e.isApproved=!1,e.listOfData=[]}))}},{key:"getEmployee",value:function(){var e=this;this.employeeService.getAll().subscribe((function(n){e.allEmployees=n,e.employees=n}))}}]),e}()).\u0275fac=function(e){return new(e||ft)(u.Tb(p.c),u.Tb(l.c),u.Tb(v.b),u.Tb(C.c),u.Tb(dn.a),u.Tb(jn))},ft.\u0275cmp=u.Nb({type:ft,selectors:[["app-fees"]],decls:48,vars:17,consts:[[1,"wrap"],[1,"page-header"],["class","ml-1",3,"nzColor",4,"ngIf"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-icon","","nzType","arrow-right","nzTheme","outline"],["nzPlaceHolder","Select month",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","aim","nzTheme","outline"],[1,"page-content"],[3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],["class","form-wrap",4,"ngIf"],["nzTitle","Add fee for employees","nzWidth","1000px",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-form","",3,"formGroup"],["nzRequired","","nzFor","employee",3,"nzSm","nzXs"],["nzErrorTip","The input is required!"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a employee","id","employee","formControlName","employeeId",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-row","",1,"page-action"],["nz-col","","nzSpan","19"],["nzOrientation","left","nzText","Fees",1,"fee-title"],["nz-col","","nzSpan","5",1,"text-right"],["nz-button","","nzType","default","nzShape","circle","nz-tooltip","","nzTooltipTitle","Add",3,"click"],["nz-icon","","nzType","plus"],[1,"data-table",3,"nzData","nzFrontPagination"],["createTable",""],["nzWidth","300px"],["nzWidth","200px"],["nzWidth","60px"],["ngFor","",3,"ngForOf"],[1,"ml-1",3,"nzColor"],[3,"nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["nz-button","","nzType","primary",3,"disabled","click"],["nz-button","","nzType","dashed",3,"disabled","nzLoading","click"],[1,"form-wrap"],["nz-col","","nzSpan","24",1,"text-right"],[4,"ngIf"],[1,"data-table",3,"nzData","nzShowPagination"],["basicTable",""],["nz-icon","","nzType","check"],["nz-button","","nzType","default","nzDanger","","nzShape","round",3,"click"],["nz-icon","","nzType","stop"],[3,"routerLink"],["nz-icon","","nzType","info-circle","nzTheme","outline","nz-popover","","nzPopoverTitle","Detail",3,"nzPopoverContent"],["popoverContent",""],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nz-tooltip","","nzTooltipTitle","Edit",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete"],["nz-icon","","nzType","delete"],[1,"fee-desc"],[3,"nzLabel","nzValue"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a type",2,"width","100%",3,"formControlName","ngModelChange"],["nzPlaceHolder","Amount",2,"width","100%",3,"formControlName","ngModelChange"],["nz-input","","nzAutosize","","placeholder","Description",3,"formControlName","ngModelChange"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete",3,"click",4,"ngIf"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete",3,"click"]],template:function(e,n){if(1&e&&(u.Zb(0,"div",0),u.Zb(1,"nz-page-header",1),u.Zb(2,"nz-page-header-title"),u.Ic(3,"Fees"),u.Yb(),u.Zb(4,"nz-page-header-subtitle"),u.Ic(5),u.lc(6,"date"),u.Gc(7,Kn,2,1,"nz-tag",2),u.Yb(),u.Zb(8,"nz-page-header-extra"),u.Zb(9,"button",3),u.hc("click",(function(){return n.onPrevMonth()})),u.Ub(10,"i",4),u.Yb(),u.Zb(11,"button",3),u.hc("click",(function(){return n.onNextMonth()})),u.Ub(12,"i",5),u.Yb(),u.Zb(13,"nz-month-picker",6),u.hc("ngModelChange",(function(e){return n.date=e}))("ngModelChange",(function(e){return n.onMonthChange(e)})),u.Yb(),u.Zb(14,"button",7),u.hc("click",(function(){return n.onThisMonth()})),u.Ub(15,"i",8),u.Ic(16,"This month "),u.Yb(),u.Yb(),u.Yb(),u.Zb(17,"div",9),u.Gc(18,tt,5,2,"nz-empty",10),u.Gc(19,ut,22,7,"div",11),u.Yb(),u.Yb(),u.Zb(20,"nz-modal",12),u.hc("nzVisibleChange",(function(e){return n.isModalVisible=e}))("nzOnCancel",(function(){return n.handleCreateFormCancel()}))("nzOnOk",(function(){return n.handleCreateFormOk()})),u.Zb(21,"form",13),u.Zb(22,"nz-form-item"),u.Zb(23,"nz-form-label",14),u.Ic(24,"Employee"),u.Yb(),u.Zb(25,"nz-form-control",15),u.Zb(26,"nz-select",16),u.hc("ngModelChange",(function(){return n.updateFeesData()})),u.Gc(27,bt,1,2,"nz-option",17),u.Yb(),u.Yb(),u.Yb(),u.Zb(28,"div",18),u.Zb(29,"div",19),u.Ub(30,"nz-divider",20),u.Yb(),u.Zb(31,"div",21),u.Zb(32,"button",22),u.hc("click",(function(){return n.addFee()})),u.Ub(33,"i",23),u.Yb(),u.Yb(),u.Yb(),u.Zb(34,"nz-table",24,25),u.Zb(36,"thead"),u.Zb(37,"tr"),u.Zb(38,"th",26),u.Ic(39,"Type"),u.Yb(),u.Zb(40,"th",27),u.Ic(41,"Amount"),u.Yb(),u.Zb(42,"th"),u.Ic(43,"Description"),u.Yb(),u.Zb(44,"th",28),u.Ic(45,"##"),u.Yb(),u.Yb(),u.Yb(),u.Zb(46,"tbody"),u.Gc(47,ht,16,5,"ng-template",29),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&e){var t=u.yc(35);u.Cb(5),u.Kc("",u.nc(6,14,n.date,"MM/yyyy")," "),u.Cb(2),u.qc("ngIf",n.isApproved),u.Cb(6),u.qc("ngModel",n.date),u.Cb(5),u.qc("ngIf",!n.isCreated),u.Cb(1),u.qc("ngIf",n.isCreated),u.Cb(1),u.qc("nzVisible",n.isModalVisible),u.Cb(1),u.qc("formGroup",n.createForm),u.Cb(2),u.qc("nzSm",6)("nzXs",24),u.Cb(3),u.qc("ngModel",n.currentEmployeeId),u.Cb(1),u.qc("ngForOf",n.employees),u.Cb(7),u.qc("nzData",n.newFees)("nzFrontPagination",!1),u.Cb(13),u.qc("ngForOf",t.data)}},directives:[Y.a,Y.e,Y.d,s.m,Y.b,k.a,U.a,E.a,I.b,T.a,T.c,p.k,p.m,C.a,p.p,p.l,Z.b,p.g,N.c,Z.c,N.a,Z.d,Z.a,Jn.b,p.f,s.l,Wn.a,F.d,M.c,M.g,M.h,M.b,M.f,M.e,A.a,S.b,W,J,l.e,$n.a,Jn.a,w.a,pn.b,pn.a,p.b],pipes:[s.e,s.f,Xn,Qn,xn],styles:[".page-action[_ngcontent-%COMP%]{padding-bottom:25px}nz-empty[_ngcontent-%COMP%]{margin-top:50px}.fee-desc[_ngcontent-%COMP%]{white-space:pre}.fee-title[_ngcontent-%COMP%]{margin:5px 0 0!important}nz-table[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]{margin-bottom:0}"]}),ft),yt=t("jEv5"),gt=t("KkgV"),vt=function e(){_classCallCheck(this,e)},Ct=function e(){_classCallCheck(this,e)},Yt=function e(){_classCallCheck(this,e)},kt=((mt=function(){function e(n){_classCallCheck(this,e),this.http=n,this.API_URL=f.a.apiUrl+"/allowances"}return _createClass(e,[{key:"getByMonth",value:function(e){return this.http.get(this.API_URL+"/".concat(e))}},{key:"create",value:function(e){return this.http.post(this.API_URL,e)}},{key:"updateByEmployee",value:function(e,n,t){return this.http.put(this.API_URL+"/".concat(e,"/").concat(n),t)}},{key:"deleteByEmployee",value:function(e,n,t){return this.http.delete(this.API_URL+"/".concat(e,"/").concat(n))}},{key:"statuses",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e,"/statuses"),n)}},{key:"addByEmployee",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e),n)}}]),e}()).\u0275fac=function(e){return new(e||mt)(u.dc(_.c))},mt.\u0275prov=u.Pb({token:mt,factory:mt.\u0275fac,providedIn:"root"}),mt);function It(e,n){1&e&&(u.Zb(0,"nz-tag",30),u.Ic(1,"Approved"),u.Yb()),2&e&&u.qc("nzColor","#87d068")}function Tt(e,n){if(1&e&&(u.Zb(0,"span"),u.Ic(1,"Have no allowances for "),u.Zb(2,"nz-tag"),u.Ic(3),u.lc(4,"date"),u.Yb(),u.Yb()),2&e){var t=u.kc(2);u.Cb(3),u.Jc(u.nc(4,1,t.date,"MM/yyyy"))}}function Zt(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",34),u.hc("click",(function(){return u.zc(t),u.kc(2).onCreate()})),u.Ic(1,"Create Now"),u.Yb()}if(2&e){var i=u.kc(2);u.qc("disabled",!i.date)("nzLoading",i.isCreating)}}function wt(e,n){if(1&e&&(u.Zb(0,"nz-empty",31),u.Gc(1,Tt,5,4,"ng-template",null,32,u.Hc),u.Gc(3,Zt,2,2,"ng-template",null,33,u.Hc),u.Yb()),2&e){var t=u.yc(2),i=u.yc(4);u.qc("nzNotFoundContent",t)("nzNotFoundFooter",i)}}function At(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",7),u.hc("click",(function(){return u.zc(t),u.kc(2).approve()})),u.Ub(2,"i",40),u.Ic(3," Approve"),u.Yb(),u.Yb()}}function St(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",41),u.hc("click",(function(){return u.zc(t),u.kc(2).unapproved()})),u.Ub(2,"i",42),u.Ic(3," Unapproved"),u.Yb(),u.Yb()}}function Ft(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",22),u.hc("click",(function(){return u.zc(t),u.kc(2).add()})),u.Ub(2,"i",23),u.Yb(),u.Yb()}}function Mt(e,n){1&e&&(u.Zb(0,"th"),u.Ic(1,"##"),u.Yb())}function Ot(e,n){if(1&e){var t=u.ac();u.Zb(0,"td"),u.Zb(1,"button",46),u.hc("click",(function(){u.zc(t);var e=u.kc().$implicit;return u.kc(2).edit(e)})),u.Ub(2,"i",47),u.Yb(),u.Zb(3,"button",48),u.Ub(4,"i",49),u.Yb(),u.Yb()}}function Dt(e,n){if(1&e&&(u.Zb(0,"div",50),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit,i=u.kc(2);u.Cb(1),u.Jc(i.getDescription(t.items))}}function _t(e,n){if(1&e&&(u.Zb(0,"tr"),u.Zb(1,"td"),u.Zb(2,"a",43),u.Ic(3),u.Yb(),u.Yb(),u.Zb(4,"td"),u.Ic(5),u.Yb(),u.Zb(6,"td"),u.Ic(7),u.lc(8,"number"),u.lc(9,"sumByField"),u.Yb(),u.Zb(10,"td"),u.Ic(11),u.lc(12,"subStr"),u.Ub(13,"i",44),u.Yb(),u.Gc(14,Ot,5,0,"td",37),u.Yb(),u.Gc(15,Dt,2,1,"ng-template",null,45,u.Hc)),2&e){var t=n.$implicit,i=u.yc(16),o=u.kc(2);u.Cb(2),u.sc("routerLink","/employee/detail/",t.employee.id,""),u.Cb(1),u.Jc(t.employee.email),u.Cb(2),u.Jc(t.employee.fullName),u.Cb(2),u.Kc(" ",u.mc(8,7,u.nc(9,9,t.items,"amount"))," "),u.Cb(4),u.Kc(" ",u.nc(12,12,o.getDescription(t.items),"30")," "),u.Cb(2),u.qc("nzPopoverContent",i),u.Cb(1),u.qc("ngIf",!o.isApproved)}}function qt(e,n){if(1&e&&(u.Zb(0,"div",35),u.Zb(1,"div",18),u.Zb(2,"div",36),u.Zb(3,"nz-space"),u.Gc(4,At,4,0,"nz-space-item",37),u.Gc(5,St,4,0,"nz-space-item",37),u.Gc(6,Ft,3,0,"nz-space-item",37),u.Yb(),u.Yb(),u.Yb(),u.Zb(7,"nz-table",38,39),u.Zb(9,"thead"),u.Zb(10,"tr"),u.Zb(11,"th"),u.Ic(12,"Email"),u.Yb(),u.Zb(13,"th"),u.Ic(14,"Name"),u.Yb(),u.Zb(15,"th"),u.Ic(16,"Total allowance amount"),u.Yb(),u.Zb(17,"th"),u.Ic(18,"Description"),u.Yb(),u.Gc(19,Mt,2,0,"th",37),u.Yb(),u.Yb(),u.Zb(20,"tbody"),u.Gc(21,_t,17,15,"ng-template",29),u.Yb(),u.Yb(),u.Yb()),2&e){var t=u.yc(8),i=u.kc();u.Cb(4),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(1),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("nzData",i.listOfData)("nzShowPagination",!1),u.Cb(12),u.qc("ngIf",!i.isApproved),u.Cb(2),u.qc("ngForOf",t.data)}}function Pt(e,n){if(1&e&&u.Ub(0,"nz-option",51),2&e){var t=n.$implicit;u.qc("nzLabel",t.fullName)("nzValue",t.id)}}function Ut(e,n){if(1&e&&(u.Ub(0,"nz-option",51),u.lc(1,"allowanceTypeName")),2&e){var t=n.$implicit;u.qc("nzLabel",u.mc(1,2,t))("nzValue",t)}}function Et(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",56),u.hc("click",(function(){u.zc(t);var e=u.kc().$implicit;return u.kc().removeAllowance(e)})),u.Ub(1,"i",49),u.Yb()}}function Nt(e,n){if(1&e){var t=u.ac();u.Zb(0,"tr"),u.Zb(1,"td"),u.Zb(2,"nz-form-item"),u.Zb(3,"nz-form-control",15),u.Zb(4,"nz-select",52),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateAllowancesData()})),u.Gc(5,Ut,2,4,"nz-option",17),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(6,"td"),u.Zb(7,"nz-form-item"),u.Zb(8,"nz-form-control",15),u.Zb(9,"nz-input-number",53),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateAllowancesData()})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(10,"td"),u.Zb(11,"nz-form-item"),u.Zb(12,"nz-form-control",15),u.Zb(13,"textarea",54),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateAllowancesData()})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"td"),u.Gc(15,Et,2,0,"button",55),u.Yb(),u.Yb()}if(2&e){var i=n.$implicit,o=u.kc();u.Cb(4),u.qc("formControlName","type_"+i.id),u.Cb(1),u.qc("ngForOf",o.allowanceTypes),u.Cb(4),u.qc("formControlName","amount_"+i.id),u.Cb(4),u.qc("formControlName","description_"+i.id),u.Cb(2),u.qc("ngIf",o.currentAllowances.length>1)}}var Gt,Vt,xt,Rt=((Gt=function(){function e(n,t,i,o,a,c){_classCallCheck(this,e),this.fb=n,this.route=t,this.message=i,this.modal=o,this.allowanceService=a,this.employeeService=c,this.date=new Date,this.isApproved=!1,this.listOfData=[],this.isCreating=!1,this.isCreated=!1,this.isModalVisible=!1,this.allEmployees=[],this.employees=[],this.currentAllowanceId=0,this.allowanceTypes=Object.keys(yt.a)}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadAllowance(),this.createForm=this.fb.group({employeeId:[null,[p.o.required]]}),this.currentAllowances=[],this.getEmployee()}},{key:"onMonthChange",value:function(e){this.date=e,this.loadAllowance()}},{key:"onThisMonth",value:function(){this.date=new Date,this.loadAllowance()}},{key:"onPrevMonth",value:function(){this.date=d(this.date).add(-1,"month").toDate(),this.loadAllowance()}},{key:"onNextMonth",value:function(){this.date=d(this.date).add(1,"month").toDate(),this.loadAllowance()}},{key:"onCreate",value:function(){var e=this;this.isCreating=!0;var n=new vt;n.month=d(this.date).format("YYYY-MM")+"-01",this.allowanceService.create(n).subscribe((function(n){e.isCreated=!0,e.isCreating=!1,e.listOfData=n.items}),(function(n){e.isCreating=!1}))}},{key:"approve",value:function(){var e=this;this.modal.confirm({nzTitle:"Do you Want to approve this allowances?",nzContent:"Once you approved, you can still edit it later",nzOnOk:function(){var n=new g;n.status="APPROVED";var t=d(e.date).format("YYYY-MM");e.allowanceService.statuses(t,n).subscribe((function(n){e.isApproved=!0,e.message.info("Approve successfully!")}),(function(n){e.message.error("Approve unsuccessfully!")}))}})}},{key:"unapproved",value:function(){var e=this,n=new g;n.status="UNAPPROVED";var t=d(this.date).format("YYYY-MM");this.allowanceService.statuses(t,n).subscribe((function(n){e.isApproved=!1,e.message.info("Unapproved successfully!")}),(function(n){e.message.error("Unapproved unsuccessfully!")}))}},{key:"add",value:function(){var e=this;this.employees=this.allEmployees.filter((function(n){return!e.listOfData.some((function(e){return e.employee.id===n.id}))})),this.resetCreateForm(),this.addAllowance(),this.isModalVisible=!0,this.actionType="ADD"}},{key:"edit",value:function(e){this.employees=this.allEmployees.filter((function(n){return n.id===e.employee.id})),this.initCreateForm(e),this.isModalVisible=!0,this.actionType="EDIT"}},{key:"handleCreateFormOk",value:function(){var e=this;for(var n in this.createForm.controls)this.createForm.controls[n].markAsDirty(),this.createForm.controls[n].updateValueAndValidity();if(!this.createForm.invalid){var t=d(this.date).format("YYYY-MM");if("ADD"===this.actionType){var i=new Ct;i.employee=new Bn,i.employee.id=this.createForm.get("employeeId").value,i.items=this.currentAllowances,this.allowanceService.addByEmployee(t,i).subscribe((function(n){e.listOfData=n.items,e.message.info("Add successfully!")}),(function(n){e.message.error("Add unsuccessfully!")}))}"EDIT"===this.actionType&&this.allowanceService.updateByEmployee(t,this.currentEmployeeId,this.currentAllowances).subscribe((function(n){e.listOfData=n.items,e.message.info("Update successfully!")}),(function(n){e.message.error("Update unsuccessfully!")})),this.isModalVisible=!1}}},{key:"handleCreateFormCancel",value:function(){this.isModalVisible=!1}},{key:"addAllowance",value:function(){var e=new Yt;e.id=this.currentAllowanceId+"";var n=this.currentAllowances;n.push(e),this.currentAllowances=_toConsumableArray(n),this.createForm.addControl("type_"+this.currentAllowanceId,new p.d(null,p.o.required)),this.createForm.addControl("amount_"+this.currentAllowanceId,new p.d(0,p.o.required)),this.createForm.addControl("description_"+this.currentAllowanceId,new p.d(null,p.o.required)),this.currentAllowanceId++}},{key:"initCreateForm",value:function(e){this.createForm=this.fb.group({}),this.currentEmployeeId=e.employee.id,this.createForm.addControl("employeeId",new p.d(e.employee.id,p.o.required));var n=e.items.map((function(e){return z.a.map(e,new Yt)}));this.currentAllowances=_toConsumableArray(n);for(var t=0;t<n.length;t++){var i=n[t];this.createForm.addControl("type_"+i.id,new p.d(i.type,p.o.required)),this.createForm.addControl("amount_"+i.id,new p.d(i.amount,p.o.required)),this.createForm.addControl("description_"+i.id,new p.d(i.description,p.o.required))}var o=n.map((function(e){return e.id}));this.currentAllowanceId=Math.max.apply(Math,o)+1}},{key:"removeAllowance",value:function(e){this.isModalVisible=!1}},{key:"updateAllowancesData",value:function(){var e,n=_createForOfIteratorHelper(this.currentAllowances);try{for(n.s();!(e=n.n()).done;){var t=e.value;t.description=this.createForm.get("description_"+t.id).value,t.amount=this.createForm.get("amount_"+t.id).value,t.type=this.createForm.get("type_"+t.id).value}}catch(i){n.e(i)}finally{n.f()}}},{key:"resetCreateForm",value:function(){this.createForm=this.fb.group({employeeId:[null,[p.o.required]]}),this.currentAllowances=[],this.currentAllowanceId=0}},{key:"getDescription",value:function(e){var n="";return e.forEach((function(e){n.length&&(n+="\n"),n+=(new gt.a).transform(e.type),e.description&&(n+=" ("+e.description+")"),n+=": "+e.amount})),n}},{key:"loadAllowance",value:function(){var e=this,n=d(this.date).format("YYYY-MM");this.allowanceService.getByMonth(n).subscribe((function(n){e.isCreated=!0,e.isApproved=n.status&&"APPROVED"===n.status,e.listOfData=n.items}),(function(n){e.isCreated=!1,e.isApproved=!1,e.listOfData=[]}))}},{key:"getEmployee",value:function(){var e=this;this.employeeService.getAll().subscribe((function(n){e.allEmployees=n,e.employees=n}))}}]),e}()).\u0275fac=function(e){return new(e||Gt)(u.Tb(p.c),u.Tb(l.c),u.Tb(v.b),u.Tb(C.c),u.Tb(kt),u.Tb(dn.a))},Gt.\u0275cmp=u.Nb({type:Gt,selectors:[["app-allowances"]],decls:48,vars:17,consts:[[1,"wrap"],[1,"page-header"],["class","ml-1",3,"nzColor",4,"ngIf"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-icon","","nzType","arrow-right","nzTheme","outline"],["nzPlaceHolder","Select month",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","aim","nzTheme","outline"],[1,"page-content"],[3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],["class","form-wrap",4,"ngIf"],["nzTitle","Add allowances for employees","nzWidth","1000px",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-form","",3,"formGroup"],["nzRequired","","nzFor","employee",3,"nzSm","nzXs"],["nzErrorTip","The input is required!"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a employee","id","employeeId","formControlName","employeeId",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-row","",1,"page-action"],["nz-col","","nzSpan","19"],["nzOrientation","left","nzText","Fees",1,"fee-title"],["nz-col","","nzSpan","5",1,"text-right"],["nz-button","","nzType","default","nzShape","circle","nz-tooltip","","nzTooltipTitle","Add",3,"click"],["nz-icon","","nzType","plus"],[1,"data-table",3,"nzData","nzFrontPagination"],["createTable",""],["nzWidth","300px"],["nzWidth","200px"],["nzWidth","60px"],["ngFor","",3,"ngForOf"],[1,"ml-1",3,"nzColor"],[3,"nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],[1,"form-wrap"],["nz-col","","nzSpan","24",1,"text-right"],[4,"ngIf"],[1,"data-table",3,"nzData","nzShowPagination"],["basicTable",""],["nz-icon","","nzType","check"],["nz-button","","nzType","default","nzDanger","","nzShape","round",3,"click"],["nz-icon","","nzType","stop"],[3,"routerLink"],["nz-icon","","nzType","info-circle","nzTheme","outline","nz-popover","","nzPopoverTitle","Detail",3,"nzPopoverContent"],["popoverContent",""],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nz-tooltip","","nzTooltipTitle","Edit",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete"],["nz-icon","","nzType","delete"],[1,"allowance-desc"],[3,"nzLabel","nzValue"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a type",2,"width","100%",3,"formControlName","ngModelChange"],["nzPlaceHolder","Amount",2,"width","100%",3,"formControlName","ngModelChange"],["nz-input","","nzAutosize","","placeholder","Description",3,"formControlName","ngModelChange"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete",3,"click",4,"ngIf"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete",3,"click"]],template:function(e,n){if(1&e&&(u.Zb(0,"div",0),u.Zb(1,"nz-page-header",1),u.Zb(2,"nz-page-header-title"),u.Ic(3,"Allowances"),u.Yb(),u.Zb(4,"nz-page-header-subtitle"),u.Ic(5),u.lc(6,"date"),u.Gc(7,It,2,1,"nz-tag",2),u.Yb(),u.Zb(8,"nz-page-header-extra"),u.Zb(9,"button",3),u.hc("click",(function(){return n.onPrevMonth()})),u.Ub(10,"i",4),u.Yb(),u.Zb(11,"button",3),u.hc("click",(function(){return n.onNextMonth()})),u.Ub(12,"i",5),u.Yb(),u.Zb(13,"nz-month-picker",6),u.hc("ngModelChange",(function(e){return n.date=e}))("ngModelChange",(function(e){return n.onMonthChange(e)})),u.Yb(),u.Zb(14,"button",7),u.hc("click",(function(){return n.onThisMonth()})),u.Ub(15,"i",8),u.Ic(16,"This month "),u.Yb(),u.Yb(),u.Yb(),u.Zb(17,"div",9),u.Gc(18,wt,5,2,"nz-empty",10),u.Gc(19,qt,22,7,"div",11),u.Yb(),u.Yb(),u.Zb(20,"nz-modal",12),u.hc("nzVisibleChange",(function(e){return n.isModalVisible=e}))("nzOnCancel",(function(){return n.handleCreateFormCancel()}))("nzOnOk",(function(){return n.handleCreateFormOk()})),u.Zb(21,"form",13),u.Zb(22,"nz-form-item"),u.Zb(23,"nz-form-label",14),u.Ic(24,"Employee"),u.Yb(),u.Zb(25,"nz-form-control",15),u.Zb(26,"nz-select",16),u.hc("ngModelChange",(function(){return n.updateAllowancesData()})),u.Gc(27,Pt,1,2,"nz-option",17),u.Yb(),u.Yb(),u.Yb(),u.Zb(28,"div",18),u.Zb(29,"div",19),u.Ub(30,"nz-divider",20),u.Yb(),u.Zb(31,"div",21),u.Zb(32,"button",22),u.hc("click",(function(){return n.addAllowance()})),u.Ub(33,"i",23),u.Yb(),u.Yb(),u.Yb(),u.Zb(34,"nz-table",24,25),u.Zb(36,"thead"),u.Zb(37,"tr"),u.Zb(38,"th",26),u.Ic(39,"Type"),u.Yb(),u.Zb(40,"th",27),u.Ic(41,"Amount"),u.Yb(),u.Zb(42,"th"),u.Ic(43,"Description"),u.Yb(),u.Zb(44,"th",28),u.Ic(45,"##"),u.Yb(),u.Yb(),u.Yb(),u.Zb(46,"tbody"),u.Gc(47,Nt,16,5,"ng-template",29),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&e){var t=u.yc(35);u.Cb(5),u.Kc("",u.nc(6,14,n.date,"MM/yyyy")," "),u.Cb(2),u.qc("ngIf",n.isApproved),u.Cb(6),u.qc("ngModel",n.date),u.Cb(5),u.qc("ngIf",!n.isCreated),u.Cb(1),u.qc("ngIf",n.isCreated),u.Cb(1),u.qc("nzVisible",n.isModalVisible),u.Cb(1),u.qc("formGroup",n.createForm),u.Cb(2),u.qc("nzSm",6)("nzXs",24),u.Cb(3),u.qc("ngModel",n.currentEmployeeId),u.Cb(1),u.qc("ngForOf",n.employees),u.Cb(7),u.qc("nzData",n.currentAllowances)("nzFrontPagination",!1),u.Cb(13),u.qc("ngForOf",t.data)}},directives:[Y.a,Y.e,Y.d,s.m,Y.b,k.a,U.a,E.a,I.b,T.a,T.c,p.k,p.m,C.a,p.p,p.l,Z.b,p.g,N.c,Z.c,N.a,Z.d,Z.a,Jn.b,p.f,s.l,Wn.a,F.d,M.c,M.g,M.h,M.b,M.f,M.e,A.a,S.b,W,J,l.e,$n.a,Jn.a,w.a,pn.b,pn.a,p.b],pipes:[s.e,s.f,Xn,Qn,gt.a],styles:[".page-action[_ngcontent-%COMP%]{padding-bottom:25px}nz-empty[_ngcontent-%COMP%]{margin-top:50px}.allowance-desc[_ngcontent-%COMP%]{white-space:pre}"]}),Gt),Lt=function e(){_classCallCheck(this,e)},Bt=function(e){return e.PERFORMANCE="PERFORMANCE",e.PROJECT="PROJECT",e.VACATION="VACATION",e.OTHER="OTHER",e}({}),Ht=function e(){_classCallCheck(this,e)},Jt=((xt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){if(!e)return"";switch(e){case Bt.PERFORMANCE:return"Performance";case Bt.PROJECT:return"Project";case Bt.VACATION:return"Vacation";case Bt.OTHER:default:return"Other"}}}]),e}()).\u0275fac=function(e){return new(e||xt)},xt.\u0275pipe=u.Sb({name:"bonusTypeName",type:xt,pure:!0}),xt),Wt=((Vt=function(){function e(n){_classCallCheck(this,e),this.http=n,this.API_URL=f.a.apiUrl+"/bonuses"}return _createClass(e,[{key:"getByMonth",value:function(e){return this.http.get(this.API_URL+"/".concat(e))}},{key:"create",value:function(e){return this.http.post(this.API_URL,e)}},{key:"updateByEmployee",value:function(e,n,t){return this.http.put(this.API_URL+"/".concat(e,"/").concat(n),t)}},{key:"deleteByEmployee",value:function(e,n,t){return this.http.delete(this.API_URL+"/".concat(e,"/").concat(n))}},{key:"statuses",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e,"/statuses"),n)}},{key:"addByEmployee",value:function(e,n){return this.http.post(this.API_URL+"/".concat(e),n)}}]),e}()).\u0275fac=function(e){return new(e||Vt)(u.dc(_.c))},Vt.\u0275prov=u.Pb({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt);function $t(e,n){1&e&&(u.Zb(0,"nz-tag",30),u.Ic(1,"Approved"),u.Yb()),2&e&&u.qc("nzColor","#87d068")}function jt(e,n){if(1&e&&(u.Zb(0,"span"),u.Ic(1,"Have no bonus for "),u.Zb(2,"nz-tag"),u.Ic(3),u.lc(4,"date"),u.Yb(),u.Yb()),2&e){var t=u.kc(2);u.Cb(3),u.Jc(u.nc(4,1,t.date,"MM/yyyy"))}}function Xt(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space"),u.Zb(1,"nz-space-item"),u.Zb(2,"button",34),u.hc("click",(function(){return u.zc(t),u.kc(2).add()})),u.Ic(3,"Create Now"),u.Yb(),u.Yb(),u.Zb(4,"nz-space-item"),u.Zb(5,"button",35),u.hc("click",(function(){return u.zc(t),u.kc(2).onEmptyApprove()})),u.Ic(6,"Approve with empty bonuse"),u.Yb(),u.Yb(),u.Yb()}if(2&e){var i=u.kc(2);u.Cb(2),u.qc("disabled",!i.date),u.Cb(3),u.qc("disabled",!i.date)("nzLoading",i.isApproving)}}function Qt(e,n){if(1&e&&(u.Zb(0,"nz-empty",31),u.Gc(1,jt,5,4,"ng-template",null,32,u.Hc),u.Gc(3,Xt,7,3,"ng-template",null,33,u.Hc),u.Yb()),2&e){var t=u.yc(2),i=u.yc(4);u.qc("nzNotFoundContent",t)("nzNotFoundFooter",i)}}function Kt(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",7),u.hc("click",(function(){return u.zc(t),u.kc(2).approve()})),u.Ub(2,"i",41),u.Ic(3," Approve"),u.Yb(),u.Yb()}}function ei(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",42),u.hc("click",(function(){return u.zc(t),u.kc(2).unapproved()})),u.Ub(2,"i",43),u.Ic(3," Unapproved"),u.Yb(),u.Yb()}}function ni(e,n){if(1&e){var t=u.ac();u.Zb(0,"nz-space-item"),u.Zb(1,"button",22),u.hc("click",(function(){return u.zc(t),u.kc(2).add()})),u.Ub(2,"i",23),u.Yb(),u.Yb()}}function ti(e,n){1&e&&(u.Zb(0,"th"),u.Ic(1,"##"),u.Yb())}function ii(e,n){if(1&e){var t=u.ac();u.Zb(0,"td"),u.Zb(1,"button",47),u.hc("click",(function(){u.zc(t);var e=u.kc().$implicit;return u.kc(2).edit(e)})),u.Ub(2,"i",48),u.Yb(),u.Zb(3,"button",49),u.Ub(4,"i",50),u.Yb(),u.Yb()}}function oi(e,n){if(1&e&&(u.Zb(0,"div",51),u.Ic(1),u.Yb()),2&e){var t=u.kc().$implicit,i=u.kc(2);u.Cb(1),u.Jc(i.getDescription(t.items))}}function ai(e,n){if(1&e&&(u.Zb(0,"tr"),u.Zb(1,"td"),u.Zb(2,"a",44),u.Ic(3),u.Yb(),u.Yb(),u.Zb(4,"td"),u.Ic(5),u.Yb(),u.Zb(6,"td"),u.Ic(7),u.lc(8,"number"),u.lc(9,"sumByField"),u.Yb(),u.Zb(10,"td"),u.Ic(11),u.lc(12,"subStr"),u.Ub(13,"i",45),u.Yb(),u.Gc(14,ii,5,0,"td",38),u.Yb(),u.Gc(15,oi,2,1,"ng-template",null,46,u.Hc)),2&e){var t=n.$implicit,i=u.yc(16),o=u.kc(2);u.Cb(2),u.sc("routerLink","/employee/detail/",t.employee.id,""),u.Cb(1),u.Jc(t.employee.email),u.Cb(2),u.Jc(t.employee.fullName),u.Cb(2),u.Jc(u.mc(8,7,u.nc(9,9,t.items,"amount"))),u.Cb(4),u.Kc(" ",u.nc(12,12,o.getDescription(t.items),"30")," "),u.Cb(2),u.qc("nzPopoverContent",i),u.Cb(1),u.qc("ngIf",!o.isApproved)}}function ci(e,n){if(1&e&&(u.Zb(0,"div",36),u.Zb(1,"div",18),u.Zb(2,"div",37),u.Zb(3,"nz-space"),u.Gc(4,Kt,4,0,"nz-space-item",38),u.Gc(5,ei,4,0,"nz-space-item",38),u.Gc(6,ni,3,0,"nz-space-item",38),u.Yb(),u.Yb(),u.Yb(),u.Zb(7,"nz-table",39,40),u.Zb(9,"thead"),u.Zb(10,"tr"),u.Zb(11,"th"),u.Ic(12,"Email"),u.Yb(),u.Zb(13,"th"),u.Ic(14,"Name"),u.Yb(),u.Zb(15,"th"),u.Ic(16,"Total bonues amount"),u.Yb(),u.Zb(17,"th"),u.Ic(18,"Detail"),u.Yb(),u.Gc(19,ti,2,0,"th",38),u.Yb(),u.Yb(),u.Zb(20,"tbody"),u.Gc(21,ai,17,15,"ng-template",29),u.Yb(),u.Yb(),u.Yb()),2&e){var t=u.yc(8),i=u.kc();u.Cb(4),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("ngIf",i.isApproved),u.Cb(1),u.qc("ngIf",!i.isApproved),u.Cb(1),u.qc("nzData",i.listOfData)("nzShowPagination",!1),u.Cb(12),u.qc("ngIf",!i.isApproved),u.Cb(2),u.qc("ngForOf",t.data)}}function ri(e,n){if(1&e&&u.Ub(0,"nz-option",52),2&e){var t=n.$implicit;u.qc("nzLabel",t.fullName)("nzValue",t.id)}}function si(e,n){if(1&e&&(u.Ub(0,"nz-option",52),u.lc(1,"bonusTypeName")),2&e){var t=n.$implicit;u.qc("nzLabel",u.mc(1,2,t))("nzValue",t)}}function li(e,n){if(1&e){var t=u.ac();u.Zb(0,"button",57),u.hc("click",(function(){u.zc(t);var e=u.kc().$implicit;return u.kc().removeBonus(e)})),u.Ub(1,"i",50),u.Yb()}}function ui(e,n){if(1&e){var t=u.ac();u.Zb(0,"tr"),u.Zb(1,"td"),u.Zb(2,"nz-form-item"),u.Zb(3,"nz-form-control",15),u.Zb(4,"nz-select",53),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateBonusesData()})),u.Gc(5,si,2,4,"nz-option",17),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(6,"td"),u.Zb(7,"nz-form-item"),u.Zb(8,"nz-form-control",15),u.Zb(9,"nz-input-number",54),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateBonusesData()})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(10,"td"),u.Zb(11,"nz-form-item"),u.Zb(12,"nz-form-control",15),u.Zb(13,"textarea",55),u.hc("ngModelChange",(function(){return u.zc(t),u.kc().updateBonusesData()})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"td"),u.Gc(15,li,2,0,"button",56),u.Yb(),u.Yb()}if(2&e){var i=n.$implicit,o=u.kc();u.Cb(4),u.qc("formControlName","type_"+i.id),u.Cb(1),u.qc("ngForOf",o.bonusTypes),u.Cb(4),u.qc("formControlName","amount_"+i.id),u.Cb(4),u.qc("formControlName","description_"+i.id),u.Cb(2),u.qc("ngIf",o.newBonuses.length>1)}}var bi,pi,di,hi,fi=[{path:"",component:b,children:[{path:"payroll",component:Vn},{path:"timesheet",component:ve},{path:"allowances",component:Rt},{path:"bonus",component:(bi=function(){function e(n,t,i,o,a,c){_classCallCheck(this,e),this.fb=n,this.route=t,this.message=i,this.modal=o,this.employeeService=a,this.bonusService=c,this.date=new Date,this.isApproved=!1,this.listOfData=[],this.isModalVisible=!1,this.isCreated=!1,this.isApproving=!1,this.currentBonusId=0,this.bonusTypes=Object.keys(Bt),this.allEmployees=[],this.employees=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm=this.fb.group({employeeId:[null,[p.o.required]]}),this.newBonuses=[],this.getEmployee(),this.loadBonus()}},{key:"onMonthChange",value:function(e){this.date=e,this.loadBonus()}},{key:"onThisMonth",value:function(){this.date=new Date,this.loadBonus()}},{key:"onPrevMonth",value:function(){this.date=d(this.date).add(-1,"month").toDate(),this.loadBonus()}},{key:"onNextMonth",value:function(){this.date=d(this.date).add(1,"month").toDate(),this.loadBonus()}},{key:"onEmptyApprove",value:function(){var e=this,n=new Hn;n.month=d(this.date).format("YYYY-MM")+"-01",n.isApprove=!0,this.bonusService.create(n).subscribe((function(n){e.isCreated=!0,e.isApproved=!0,e.message.info("Approve successfully!")}),(function(n){e.message.error("Unapproved successfully!")}))}},{key:"handleCreateFormOk",value:function(){var e=this;for(var n in this.createForm.controls)this.createForm.controls[n].markAsDirty(),this.createForm.controls[n].updateValueAndValidity();if(!this.createForm.invalid){var t=d(this.date).format("YYYY-MM");if("ADD"===this.actionType){var i=new Ht;i.employee=new Bn,i.employee.id=this.createForm.get("employeeId").value,i.items=this.newBonuses,i.createIfNotExist=!0,this.bonusService.addByEmployee(t,i).subscribe((function(n){e.listOfData=n.items,e.isCreated=!0,e.message.info("Add successfully!")}),(function(n){e.message.error("Add unsuccessfully!")}))}"EDIT"===this.actionType&&this.bonusService.updateByEmployee(t,this.currentEmployeeId,this.newBonuses).subscribe((function(n){e.listOfData=n.items,e.message.info("Update successfully!")}),(function(n){e.message.error("Update unsuccessfully!")})),this.isModalVisible=!1}}},{key:"handleCreateFormCancel",value:function(){this.isModalVisible=!1,this.resetCreateForm()}},{key:"approve",value:function(){var e=this;this.modal.confirm({nzTitle:"Do you Want to approve this bonuss?",nzContent:"Once you approved, you can still edit it later",nzOnOk:function(){var n=new g;n.status="APPROVED";var t=d(e.date).format("YYYY-MM");e.bonusService.statuses(t,n).subscribe((function(n){e.isApproved=!0,e.message.info("Approve successfully!")}),(function(n){e.message.error("Approve unsuccessfully!")}))}})}},{key:"unapproved",value:function(){var e=this,n=new g;n.status="UNAPPROVED";var t=d(this.date).format("YYYY-MM");this.bonusService.statuses(t,n).subscribe((function(n){e.isApproved=!1,e.message.info("Unapproved successfully!")}),(function(n){e.message.error("Unapproved unsuccessfully!")}))}},{key:"add",value:function(){var e=this;this.employees=this.allEmployees.filter((function(n){return!e.listOfData.some((function(e){return e.employee.id===n.id}))})),this.resetCreateForm(),this.addBonus(),this.isModalVisible=!0,this.actionType="ADD"}},{key:"edit",value:function(e){this.employees=this.allEmployees.filter((function(n){return n.id===e.employee.id})),this.initCreateForm(e),this.isModalVisible=!0,this.actionType="EDIT"}},{key:"addBonus",value:function(){var e=new Lt;e.id=this.currentBonusId+"";var n=this.newBonuses;n.push(e),this.newBonuses=_toConsumableArray(n),this.createForm.addControl("type_"+this.currentBonusId,new p.d(null,p.o.required)),this.createForm.addControl("amount_"+this.currentBonusId,new p.d(0,p.o.required)),this.createForm.addControl("description_"+this.currentBonusId,new p.d(null,p.o.required)),this.currentBonusId++}},{key:"removeBonus",value:function(e){this.createForm.removeControl("type_"+e.id),this.createForm.removeControl("amount_"+e.id),this.createForm.removeControl("description_"+e.id),this.newBonuses=this.newBonuses.filter((function(n){return n.id!==e.id}))}},{key:"updateBonusesData",value:function(){var e,n=_createForOfIteratorHelper(this.newBonuses);try{for(n.s();!(e=n.n()).done;){var t=e.value;t.description=this.createForm.get("description_"+t.id).value,t.amount=this.createForm.get("amount_"+t.id).value,t.type=this.createForm.get("type_"+t.id).value}}catch(i){n.e(i)}finally{n.f()}}},{key:"resetCreateForm",value:function(){this.createForm=this.fb.group({employeeId:[null,[p.o.required]]}),this.newBonuses=[],this.currentBonusId=0}},{key:"initCreateForm",value:function(e){this.createForm=this.fb.group({});var n=e.items.map((function(e){return z.a.map(e,new Ht)}));this.newBonuses=_toConsumableArray(n),this.currentEmployeeId=e.employee.id,this.createForm.addControl("employeeId",new p.d(e.employee.id,p.o.required));for(var t=0;t<n.length;t++){var i=n[t];this.createForm.addControl("type_"+i.id,new p.d(i.type,p.o.required)),this.createForm.addControl("amount_"+i.id,new p.d(i.amount,p.o.required)),this.createForm.addControl("description_"+i.id,new p.d(i.description))}var o=n.map((function(e){return e.id}));this.currentBonusId=Math.max.apply(Math,o)+1}},{key:"getDescription",value:function(e){var n="";return e.forEach((function(e){n.length&&(n+="\n"),n+=(new Jt).transform(e.type),e.description&&(n+=" ("+e.description+")"),n+=": "+e.amount})),n}},{key:"loadBonus",value:function(){var e=this,n=d(this.date).format("YYYY-MM");this.bonusService.getByMonth(n).subscribe((function(n){e.isCreated=!0,e.isApproved=n.status&&"APPROVED"===n.status,e.listOfData=n.items}),(function(n){e.isCreated=!1,e.isApproved=!1,e.listOfData=[]}))}},{key:"getEmployee",value:function(){var e=this;this.employeeService.getAll().subscribe((function(n){e.allEmployees=n,e.employees=n}))}}]),e}(),bi.\u0275fac=function(e){return new(e||bi)(u.Tb(p.c),u.Tb(l.c),u.Tb(v.b),u.Tb(C.c),u.Tb(dn.a),u.Tb(Wt))},bi.\u0275cmp=u.Nb({type:bi,selectors:[["app-bonus"]],decls:48,vars:17,consts:[[1,"wrap"],[1,"page-header"],["class","ml-1",3,"nzColor",4,"ngIf"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-icon","","nzType","arrow-right","nzTheme","outline"],["nzPlaceHolder","Select month",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","aim","nzTheme","outline"],[1,"page-content"],[3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],["class","form-wrap",4,"ngIf"],["nzTitle","Add bonuses for employees","nzWidth","1000px",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],["nz-form","",3,"formGroup"],["nzRequired","","nzFor","employee",3,"nzSm","nzXs"],["nzErrorTip","The input is required!"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a employee","id","employee","formControlName","employeeId",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-row","",1,"page-action"],["nz-col","","nzSpan","19"],["nzOrientation","left","nzText","Bonuses",1,"bonuses-title"],["nz-col","","nzSpan","5",1,"text-right"],["nz-button","","nzType","default","nzShape","circle","nz-tooltip","","nzTooltipTitle","Add",3,"click"],["nz-icon","","nzType","plus"],[1,"data-table",3,"nzData","nzFrontPagination"],["createTable",""],["nzWidth","300px"],["nzWidth","200px"],["nzWidth","60px"],["ngFor","",3,"ngForOf"],[1,"ml-1",3,"nzColor"],[3,"nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["nz-button","","nzType","primary",3,"disabled","click"],["nz-button","","nzType","dashed",3,"disabled","nzLoading","click"],[1,"form-wrap"],["nz-col","","nzSpan","24",1,"text-right"],[4,"ngIf"],[1,"data-table",3,"nzData","nzShowPagination"],["basicTable",""],["nz-icon","","nzType","check"],["nz-button","","nzType","default","nzDanger","","nzShape","round",3,"click"],["nz-icon","","nzType","stop"],[3,"routerLink"],["nz-icon","","nzType","info-circle","nzTheme","outline","nz-popover","","nzPopoverTitle","Detail",3,"nzPopoverContent"],["popoverContent",""],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nz-tooltip","","nzTooltipTitle","Edit",3,"click"],["nz-icon","","nzType","edit"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete"],["nz-icon","","nzType","delete"],[1,"bonuse-desc"],[3,"nzLabel","nzValue"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a type",2,"width","100%",3,"formControlName","ngModelChange"],["nzPlaceHolder","Amount",2,"width","100%",3,"formControlName","ngModelChange"],["nz-input","","nzAutosize","","placeholder","Description",3,"formControlName","ngModelChange"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete",3,"click",4,"ngIf"],["nz-button","","nzType","link","nzSize","small","nzShape","circle","nzDanger","","nz-tooltip","","nzTooltipTitle","Delete",3,"click"]],template:function(e,n){if(1&e&&(u.Zb(0,"div",0),u.Zb(1,"nz-page-header",1),u.Zb(2,"nz-page-header-title"),u.Ic(3,"Bonuses"),u.Yb(),u.Zb(4,"nz-page-header-subtitle"),u.Ic(5),u.lc(6,"date"),u.Gc(7,$t,2,1,"nz-tag",2),u.Yb(),u.Zb(8,"nz-page-header-extra"),u.Zb(9,"button",3),u.hc("click",(function(){return n.onPrevMonth()})),u.Ub(10,"i",4),u.Yb(),u.Zb(11,"button",3),u.hc("click",(function(){return n.onNextMonth()})),u.Ub(12,"i",5),u.Yb(),u.Zb(13,"nz-month-picker",6),u.hc("ngModelChange",(function(e){return n.date=e}))("ngModelChange",(function(e){return n.onMonthChange(e)})),u.Yb(),u.Zb(14,"button",7),u.hc("click",(function(){return n.onThisMonth()})),u.Ub(15,"i",8),u.Ic(16,"This month "),u.Yb(),u.Yb(),u.Yb(),u.Zb(17,"div",9),u.Gc(18,Qt,5,2,"nz-empty",10),u.Gc(19,ci,22,7,"div",11),u.Yb(),u.Yb(),u.Zb(20,"nz-modal",12),u.hc("nzVisibleChange",(function(e){return n.isModalVisible=e}))("nzOnCancel",(function(){return n.handleCreateFormCancel()}))("nzOnOk",(function(){return n.handleCreateFormOk()})),u.Zb(21,"form",13),u.Zb(22,"nz-form-item"),u.Zb(23,"nz-form-label",14),u.Ic(24,"Employee"),u.Yb(),u.Zb(25,"nz-form-control",15),u.Zb(26,"nz-select",16),u.hc("ngModelChange",(function(){return n.updateBonusesData()})),u.Gc(27,ri,1,2,"nz-option",17),u.Yb(),u.Yb(),u.Yb(),u.Zb(28,"div",18),u.Zb(29,"div",19),u.Ub(30,"nz-divider",20),u.Yb(),u.Zb(31,"div",21),u.Zb(32,"button",22),u.hc("click",(function(){return n.addBonus()})),u.Ub(33,"i",23),u.Yb(),u.Yb(),u.Yb(),u.Zb(34,"nz-table",24,25),u.Zb(36,"thead"),u.Zb(37,"tr"),u.Zb(38,"th",26),u.Ic(39,"Type"),u.Yb(),u.Zb(40,"th",27),u.Ic(41,"Amount"),u.Yb(),u.Zb(42,"th"),u.Ic(43,"Description"),u.Yb(),u.Zb(44,"th",28),u.Ic(45,"##"),u.Yb(),u.Yb(),u.Yb(),u.Zb(46,"tbody"),u.Gc(47,ui,16,5,"ng-template",29),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&e){var t=u.yc(35);u.Cb(5),u.Kc("",u.nc(6,14,n.date,"MM/yyyy")," "),u.Cb(2),u.qc("ngIf",n.isApproved),u.Cb(6),u.qc("ngModel",n.date),u.Cb(5),u.qc("ngIf",!n.isCreated),u.Cb(1),u.qc("ngIf",n.isCreated),u.Cb(1),u.qc("nzVisible",n.isModalVisible),u.Cb(1),u.qc("formGroup",n.createForm),u.Cb(2),u.qc("nzSm",6)("nzXs",24),u.Cb(3),u.qc("ngModel",n.currentEmployeeId),u.Cb(1),u.qc("ngForOf",n.employees),u.Cb(7),u.qc("nzData",n.newBonuses)("nzFrontPagination",!1),u.Cb(13),u.qc("ngForOf",t.data)}},directives:[Y.a,Y.e,Y.d,s.m,Y.b,k.a,U.a,E.a,I.b,T.a,T.c,p.k,p.m,C.a,p.p,p.l,Z.b,p.g,N.c,Z.c,N.a,Z.d,Z.a,Jn.b,p.f,s.l,Wn.a,F.d,M.c,M.g,M.h,M.b,M.f,M.e,A.a,S.b,W,J,l.e,$n.a,Jn.a,w.a,pn.b,pn.a,p.b],pipes:[s.e,s.f,Xn,Qn,Jt],styles:[".page-action[_ngcontent-%COMP%]{padding-bottom:25px}nz-empty[_ngcontent-%COMP%]{margin-top:50px}.bonus-desc[_ngcontent-%COMP%]{white-space:pre}.bonus-title[_ngcontent-%COMP%]{margin:5px 0 0!important}nz-table[_ngcontent-%COMP%]   nz-form-item[_ngcontent-%COMP%]{margin-bottom:0}"]}),bi)},{path:"fees",component:zt}]}],mi=((pi=function e(){_classCallCheck(this,e)}).\u0275mod=u.Rb({type:pi}),pi.\u0275inj=u.Qb({factory:function(e){return new(e||pi)},imports:[[l.f.forChild(fi)],l.f]}),pi),zi=t("PCNd"),yi=t("3/1E"),gi=t("F6ss"),vi=t("OEtX"),Ci=(t("l5mm"),t("BSwL")),Yi=((hi=function e(){_classCallCheck(this,e)}).\u0275mod=u.Rb({type:hi}),hi.\u0275inj=u.Qb({factory:function(e){return new(e||hi)},imports:[[s.c,Ne.b,Ie.a,Ci.a]]}),hi),ki=((di=function e(){_classCallCheck(this,e)}).\u0275mod=u.Rb({type:di}),di.\u0275inj=u.Qb({factory:function(e){return new(e||di)},imports:[[s.c,mi,p.h,zi.a,p.n,Y.c,M.d,yi.b,k.c,I.c,Z.e,pn.d,N.b,Jn.c,F.b,O.b,C.b,gi.a,A.b,T.b,vi.c,w.b,Wn.b,v.a,S.c,C.b,D.b,Yi,$,$n.b,bn,Ee]]}),di)}}]);